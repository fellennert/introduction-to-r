<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 13 Exercises | An(other) introduction to R</title>
  <meta name="description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 13 Exercises | An(other) introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 13 Exercises | An(other) introduction to R" />
  
  <meta name="twitter:description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  

<meta name="author" content="Felix Lennert" />


<meta name="date" content="2021-08-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="references.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.4/css/vembedr.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prologue</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i><b>1.1</b> Course outline</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i><b>1.2</b> Why R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i><b>1.2.1</b> Reproducibility</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#its-free-and-community-based"><i class="fa fa-check"></i><b>1.2.2</b> It’s free and community-based</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#jobs"><i class="fa fa-check"></i><b>1.2.3</b> Jobs</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#further-links"><i class="fa fa-check"></i><b>1.3</b> Further links</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#last-but-not-least"><i class="fa fa-check"></i><b>1.4</b> Last but not least</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introrstudio.html"><a href="introrstudio.html"><i class="fa fa-check"></i><b>2</b> Getting started with RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introrstudio.html"><a href="introrstudio.html#installing-r"><i class="fa fa-check"></i><b>2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introrstudio.html"><a href="introrstudio.html#installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introrstudio.html"><a href="introrstudio.html#setting-up-rstudio"><i class="fa fa-check"></i><b>2.3</b> Setting up RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introrstudio.html"><a href="introrstudio.html#some-remarks-on-your-daily-workflow"><i class="fa fa-check"></i><b>2.4</b> Some remarks on your daily workflow</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introrstudio.html"><a href="introrstudio.html#rstudio-projects"><i class="fa fa-check"></i><b>2.4.1</b> RStudio Projects</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introrstudio.html"><a href="introrstudio.html#r-scripts-and-rmarkdown"><i class="fa fa-check"></i><b>2.5</b> R scripts and RMarkdown</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introrstudio.html"><a href="introrstudio.html#r-scripts"><i class="fa fa-check"></i><b>2.5.1</b> R scripts</a></li>
<li class="chapter" data-level="2.5.2" data-path="introrstudio.html"><a href="introrstudio.html#rmarkdown"><i class="fa fa-check"></i><b>2.5.2</b> RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introrstudio.html"><a href="introrstudio.html#further-links-1"><i class="fa fa-check"></i><b>2.6</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intror.html"><a href="intror.html"><i class="fa fa-check"></i><b>3</b> Intro to R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intror.html"><a href="intror.html#installing-packages"><i class="fa fa-check"></i><b>3.1</b> Installing packages</a></li>
<li class="chapter" data-level="3.2" data-path="intror.html"><a href="intror.html#basic-arithmetic-operations"><i class="fa fa-check"></i><b>3.2</b> Basic arithmetic operations</a></li>
<li class="chapter" data-level="3.3" data-path="intror.html"><a href="intror.html#vectors"><i class="fa fa-check"></i><b>3.3</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intror.html"><a href="intror.html#atomic-vectors"><i class="fa fa-check"></i><b>3.3.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="3.3.2" data-path="intror.html"><a href="intror.html#working-with-atomic-vectors"><i class="fa fa-check"></i><b>3.3.2</b> Working with atomic vectors</a></li>
<li class="chapter" data-level="3.3.3" data-path="intror.html"><a href="intror.html#lists"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="intror.html"><a href="intror.html#augmented-vectors"><i class="fa fa-check"></i><b>3.3.4</b> Augmented vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intror.html"><a href="intror.html#further-links-2"><i class="fa fa-check"></i><b>3.4</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workingwithdata.html"><a href="workingwithdata.html"><i class="fa fa-check"></i><b>4</b> Working with data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workingwithdata.html"><a href="workingwithdata.html#reading-in-data-sets"><i class="fa fa-check"></i><b>4.1</b> Reading in data sets</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="workingwithdata.html"><a href="workingwithdata.html#the-working-directory-in-r"><i class="fa fa-check"></i><b>4.1.1</b> The working directory in R</a></li>
<li class="chapter" data-level="4.1.2" data-path="workingwithdata.html"><a href="workingwithdata.html#readrs-general-functions"><i class="fa fa-check"></i><b>4.1.2</b> <code>readr</code>’s general functions…</a></li>
<li class="chapter" data-level="4.1.3" data-path="workingwithdata.html"><a href="workingwithdata.html#and-their-additional-arguments"><i class="fa fa-check"></i><b>4.1.3</b> …and their additional arguments</a></li>
<li class="chapter" data-level="4.1.4" data-path="workingwithdata.html"><a href="workingwithdata.html#column-types"><i class="fa fa-check"></i><b>4.1.4</b> Column types</a></li>
<li class="chapter" data-level="4.1.5" data-path="workingwithdata.html"><a href="workingwithdata.html#rds-and-.rdatafiles"><i class="fa fa-check"></i><b>4.1.5</b> <code>.rds</code> and <code>.RData</code>files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="workingwithdata.html"><a href="workingwithdata.html#write-data"><i class="fa fa-check"></i><b>4.2</b> Write data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="workingwithdata.html"><a href="workingwithdata.html#write_csv"><i class="fa fa-check"></i><b>4.2.1</b> <code>write_csv()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="workingwithdata.html"><a href="workingwithdata.html#write_rds"><i class="fa fa-check"></i><b>4.2.2</b> <code>write_rds()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="workingwithdata.html"><a href="workingwithdata.html#save"><i class="fa fa-check"></i><b>4.2.3</b> <code>save()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="workingwithdata.html"><a href="workingwithdata.html#alternative-ways-to-read-in-and-write-data"><i class="fa fa-check"></i><b>4.3</b> Alternative ways to read in and write data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="workingwithdata.html"><a href="workingwithdata.html#haven"><i class="fa fa-check"></i><b>4.3.1</b> <code>haven</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="workingwithdata.html"><a href="workingwithdata.html#readxl"><i class="fa fa-check"></i><b>4.3.2</b> <code>readxl</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="workingwithdata.html"><a href="workingwithdata.html#vroom"><i class="fa fa-check"></i><b>4.3.3</b> <code>vroom</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="workingwithdata.html"><a href="workingwithdata.html#further-readings"><i class="fa fa-check"></i><b>4.3.4</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="workingwithdata.html"><a href="workingwithdata.html#tidy-data"><i class="fa fa-check"></i><b>4.4</b> Tidy data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="workingwithdata.html"><a href="workingwithdata.html#in-theory"><i class="fa fa-check"></i><b>4.4.1</b> In theory</a></li>
<li class="chapter" data-level="4.4.2" data-path="workingwithdata.html"><a href="workingwithdata.html#in-practice"><i class="fa fa-check"></i><b>4.4.2</b> In practice</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="workingwithdata.html"><a href="workingwithdata.html#further-links-3"><i class="fa fa-check"></i><b>4.5</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>5</b> Manipulation with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="wrangling.html"><a href="wrangling.html#working-with-the-main-verbs"><i class="fa fa-check"></i><b>5.1</b> Working with the main “verbs”</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="wrangling.html"><a href="wrangling.html#select"><i class="fa fa-check"></i><b>5.1.1</b> <code>select()</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="wrangling.html"><a href="wrangling.html#filter"><i class="fa fa-check"></i><b>5.1.2</b> <code>filter()</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="wrangling.html"><a href="wrangling.html#mutate"><i class="fa fa-check"></i><b>5.1.3</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="wrangling.html"><a href="wrangling.html#summarize-and-group_by"><i class="fa fa-check"></i><b>5.1.4</b> <code>summarize()</code> and <code>group_by</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="wrangling.html"><a href="wrangling.html#arrange"><i class="fa fa-check"></i><b>5.1.5</b> <code>arrange()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="wrangling.html"><a href="wrangling.html#introducing-joins"><i class="fa fa-check"></i><b>5.2</b> Introducing <code>joins</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="wrangling.html"><a href="wrangling.html#multiple-types-of-units-are-in-the-same-table"><i class="fa fa-check"></i><b>5.2.1</b> Multiple types of units are in the same table</a></li>
<li class="chapter" data-level="5.2.2" data-path="wrangling.html"><a href="wrangling.html#one-unit-is-in-multiple-tables"><i class="fa fa-check"></i><b>5.2.2</b> One unit is in multiple tables</a></li>
<li class="chapter" data-level="5.2.3" data-path="wrangling.html"><a href="wrangling.html#left_join-and-right_join"><i class="fa fa-check"></i><b>5.2.3</b> <code>left_join()</code> and <code>right_join()</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="wrangling.html"><a href="wrangling.html#inner_join"><i class="fa fa-check"></i><b>5.2.4</b> <code>inner_join()</code></a></li>
<li class="chapter" data-level="5.2.5" data-path="wrangling.html"><a href="wrangling.html#full_join"><i class="fa fa-check"></i><b>5.2.5</b> <code>full_join()</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="wrangling.html"><a href="wrangling.html#semi_join"><i class="fa fa-check"></i><b>5.2.6</b> <code>semi_join()</code></a></li>
<li class="chapter" data-level="5.2.7" data-path="wrangling.html"><a href="wrangling.html#anti_join"><i class="fa fa-check"></i><b>5.2.7</b> <code>anti_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="wrangling.html"><a href="wrangling.html#further-links-4"><i class="fa fa-check"></i><b>5.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stringregex.html"><a href="stringregex.html"><i class="fa fa-check"></i><b>6</b> String manipulation with <code>stringr</code> and <code>regular expressions</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="stringregex.html"><a href="stringregex.html#basic-manipulations"><i class="fa fa-check"></i><b>6.1</b> Basic manipulations</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="stringregex.html"><a href="stringregex.html#changing-the-case-of-the-words"><i class="fa fa-check"></i><b>6.1.1</b> Changing the case of the words</a></li>
<li class="chapter" data-level="6.1.2" data-path="stringregex.html"><a href="stringregex.html#deternining-a-strings-length"><i class="fa fa-check"></i><b>6.1.2</b> Deternining a string’s length</a></li>
<li class="chapter" data-level="6.1.3" data-path="stringregex.html"><a href="stringregex.html#extracting-particular-characters"><i class="fa fa-check"></i><b>6.1.3</b> Extracting particular characters</a></li>
<li class="chapter" data-level="6.1.4" data-path="stringregex.html"><a href="stringregex.html#concatenating-strings"><i class="fa fa-check"></i><b>6.1.4</b> Concatenating strings</a></li>
<li class="chapter" data-level="6.1.5" data-path="stringregex.html"><a href="stringregex.html#repetition"><i class="fa fa-check"></i><b>6.1.5</b> Repetition</a></li>
<li class="chapter" data-level="6.1.6" data-path="stringregex.html"><a href="stringregex.html#removing-unnecessary-whitespaces"><i class="fa fa-check"></i><b>6.1.6</b> Removing unnecessary whitespaces</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="stringregex.html"><a href="stringregex.html#regular-expressions"><i class="fa fa-check"></i><b>6.2</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="stringregex.html"><a href="stringregex.html#literal-characters"><i class="fa fa-check"></i><b>6.2.1</b> Literal characters</a></li>
<li class="chapter" data-level="6.2.2" data-path="stringregex.html"><a href="stringregex.html#metacharacters"><i class="fa fa-check"></i><b>6.2.2</b> Metacharacters</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="stringregex.html"><a href="stringregex.html#more-advanced-string-manipulation"><i class="fa fa-check"></i><b>6.3</b> More advanced string manipulation</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="stringregex.html"><a href="stringregex.html#detect-matches"><i class="fa fa-check"></i><b>6.3.1</b> Detect matches</a></li>
<li class="chapter" data-level="6.3.2" data-path="stringregex.html"><a href="stringregex.html#mutating-strings"><i class="fa fa-check"></i><b>6.3.2</b> Mutating strings</a></li>
<li class="chapter" data-level="6.3.3" data-path="stringregex.html"><a href="stringregex.html#extracting-text"><i class="fa fa-check"></i><b>6.3.3</b> Extracting text</a></li>
<li class="chapter" data-level="6.3.4" data-path="stringregex.html"><a href="stringregex.html#split-vectors"><i class="fa fa-check"></i><b>6.3.4</b> Split vectors</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="stringregex.html"><a href="stringregex.html#further-links-5"><i class="fa fa-check"></i><b>6.4</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="workwithfactors.html"><a href="workwithfactors.html"><i class="fa fa-check"></i><b>7</b> Factors with <code>forcats</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="workwithfactors.html"><a href="workwithfactors.html#creating-a-factor"><i class="fa fa-check"></i><b>7.1</b> Creating a factor</a></li>
<li class="chapter" data-level="7.2" data-path="workwithfactors.html"><a href="workwithfactors.html#some-basic-operations"><i class="fa fa-check"></i><b>7.2</b> Some basic operations</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="workwithfactors.html"><a href="workwithfactors.html#reordering-factors"><i class="fa fa-check"></i><b>7.2.1</b> Reordering factors</a></li>
<li class="chapter" data-level="7.2.2" data-path="workwithfactors.html"><a href="workwithfactors.html#modifying-levels"><i class="fa fa-check"></i><b>7.2.2</b> Modifying levels</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="workwithfactors.html"><a href="workwithfactors.html#further-links-6"><i class="fa fa-check"></i><b>7.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="descriptives.html"><a href="descriptives.html"><i class="fa fa-check"></i><b>8</b> Describing data sets</a>
<ul>
<li class="chapter" data-level="8.1" data-path="descriptives.html"><a href="descriptives.html#basic-descriptives"><i class="fa fa-check"></i><b>8.1</b> Basic descriptives</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="descriptives.html"><a href="descriptives.html#grouped-descriptives"><i class="fa fa-check"></i><b>8.1.1</b> Grouped descriptives</a></li>
<li class="chapter" data-level="8.1.2" data-path="descriptives.html"><a href="descriptives.html#modifying-the-skim-output"><i class="fa fa-check"></i><b>8.1.2</b> Modifying the <code>skim()</code> output</a></li>
<li class="chapter" data-level="8.1.3" data-path="descriptives.html"><a href="descriptives.html#further-descriptives"><i class="fa fa-check"></i><b>8.1.3</b> Further descriptives</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="descriptives.html"><a href="descriptives.html#communicating-results"><i class="fa fa-check"></i><b>8.2</b> Communicating results</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="descriptives.html"><a href="descriptives.html#tables-with-knitrkable-and-kableextra"><i class="fa fa-check"></i><b>8.2.1</b> Tables with <code>knitr::kable()</code> and <code>kableExtra</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="descriptives.html"><a href="descriptives.html#use-case-reporting-skimr-results"><i class="fa fa-check"></i><b>8.2.2</b> Use case: reporting <code>skimr</code> results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="descriptives.html"><a href="descriptives.html#further-links-7"><i class="fa fa-check"></i><b>8.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>9</b> Visualizations with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="visualization.html"><a href="visualization.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>9.1</b> The “layered grammar of graphics”</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="visualization.html"><a href="visualization.html#the-layers"><i class="fa fa-check"></i><b>9.1.1</b> The layers</a></li>
<li class="chapter" data-level="9.1.2" data-path="visualization.html"><a href="visualization.html#making-them-publishable"><i class="fa fa-check"></i><b>9.1.2</b> Making them “publishable”</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="visualization.html"><a href="visualization.html#exporting-graphics"><i class="fa fa-check"></i><b>9.2</b> Exporting graphics</a></li>
<li class="chapter" data-level="9.3" data-path="visualization.html"><a href="visualization.html#further-readings-1"><i class="fa fa-check"></i><b>9.3</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>10</b> Writing academic papers with <code>RMarkdown</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="markdown.html"><a href="markdown.html#introduction"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="markdown.html"><a href="markdown.html#further-resources"><i class="fa fa-check"></i><b>10.2</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="functionalprogramming.html"><a href="functionalprogramming.html"><i class="fa fa-check"></i><b>11</b> Functional programming and iterations</a>
<ul>
<li class="chapter" data-level="11.1" data-path="functionalprogramming.html"><a href="functionalprogramming.html#flow-control"><i class="fa fa-check"></i><b>11.1</b> Flow control</a></li>
<li class="chapter" data-level="11.2" data-path="functionalprogramming.html"><a href="functionalprogramming.html#functions"><i class="fa fa-check"></i><b>11.2</b> Functions</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="functionalprogramming.html"><a href="functionalprogramming.html#writing-your-own-functions"><i class="fa fa-check"></i><b>11.2.1</b> Writing your own functions</a></li>
<li class="chapter" data-level="11.2.2" data-path="functionalprogramming.html"><a href="functionalprogramming.html#an-example-roulette"><i class="fa fa-check"></i><b>11.2.2</b> An example: Roulette</a></li>
<li class="chapter" data-level="11.2.3" data-path="functionalprogramming.html"><a href="functionalprogramming.html#functional-programming-with-tidyverse-functions"><i class="fa fa-check"></i><b>11.2.3</b> Functional programming with <code>tidyverse</code> functions</a></li>
<li class="chapter" data-level="11.2.4" data-path="functionalprogramming.html"><a href="functionalprogramming.html#further-readings-2"><i class="fa fa-check"></i><b>11.2.4</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="functionalprogramming.html"><a href="functionalprogramming.html#iteration"><i class="fa fa-check"></i><b>11.3</b> Iteration</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="functionalprogramming.html"><a href="functionalprogramming.html#for-loops"><i class="fa fa-check"></i><b>11.3.1</b> <code>for</code> loops</a></li>
<li class="chapter" data-level="11.3.2" data-path="functionalprogramming.html"><a href="functionalprogramming.html#purrrmap"><i class="fa fa-check"></i><b>11.3.2</b> purrr::map()</a></li>
<li class="chapter" data-level="11.3.3" data-path="functionalprogramming.html"><a href="functionalprogramming.html#further-links-8"><i class="fa fa-check"></i><b>11.3.3</b> Further links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="chapter" data-level="13" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>13</b> Exercises</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exercises.html"><a href="exercises.html#chapter-2"><i class="fa fa-check"></i><b>13.1</b> Chapter 2</a></li>
<li class="chapter" data-level="13.2" data-path="exercises.html"><a href="exercises.html#chapter-3"><i class="fa fa-check"></i><b>13.2</b> Chapter 3</a></li>
<li class="chapter" data-level="13.3" data-path="exercises.html"><a href="exercises.html#chapter-4"><i class="fa fa-check"></i><b>13.3</b> Chapter 4</a></li>
<li class="chapter" data-level="13.4" data-path="exercises.html"><a href="exercises.html#chapter-5"><i class="fa fa-check"></i><b>13.4</b> Chapter 5</a></li>
<li class="chapter" data-level="13.5" data-path="exercises.html"><a href="exercises.html#chapter-6"><i class="fa fa-check"></i><b>13.5</b> Chapter 6</a></li>
<li class="chapter" data-level="13.6" data-path="exercises.html"><a href="exercises.html#chapter-7"><i class="fa fa-check"></i><b>13.6</b> Chapter 7</a></li>
<li class="chapter" data-level="13.7" data-path="exercises.html"><a href="exercises.html#chapter-8"><i class="fa fa-check"></i><b>13.7</b> Chapter 8</a></li>
<li class="chapter" data-level="13.8" data-path="exercises.html"><a href="exercises.html#chapter-9"><i class="fa fa-check"></i><b>13.8</b> Chapter 9</a></li>
<li class="chapter" data-level="13.9" data-path="exercises.html"><a href="exercises.html#chapter-10"><i class="fa fa-check"></i><b>13.9</b> Chapter 10</a></li>
<li class="chapter" data-level="13.10" data-path="exercises.html"><a href="exercises.html#chapter-11"><i class="fa fa-check"></i><b>13.10</b> Chapter 11</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An(other) introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercises" class="section level1" number="13">
<h1><span class="header-section-number">Chapter 13</span> Exercises</h1>
<div id="chapter-2" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Chapter 2</h2>
<ol style="list-style-type: decimal">
<li><p>Install R and RStudio.</p></li>
<li><p>Set RStudio up as you wish to. Choose a nice pane layout and theme.</p></li>
<li><p>Create an RStudio Project for this course.</p></li>
<li><p>Set up RMarkdown. Write a short text on your expectations for this course. It should at least contain: a header, an image, an unordered list. Knit it to HTML and PDF. Bonus points for including references to papers you would recommend.</p></li>
<li><p>Install and load the <code>tidyverse</code> package.</p></li>
</ol>
<details>
<summary>
Solution. Click to expand!
</summary>
<p>Solution:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="exercises.html#cb557-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb557-2"><a href="exercises.html#cb557-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</details>
</div>
<div id="chapter-3" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Chapter 3</h2>
<ol style="list-style-type: decimal">
<li>A farmer has 53323 chickens, 1334 cows, and 4323 horses.
<ol style="list-style-type: lower-alpha">
<li>Store them in a vector. Name the elements.</li>
<li>The animals have bred. There are now 75 per cent more chickens, 30 per cent more cows, and 50 per cent more horses. What is this in absolute numbers? Store the results in a new vector. Round up the results using the <code>ceiling()</code> function.</li>
<li>The farmer has to pay the tax amount x for every 2000th animal of a certain breed. How many times x does she have to pay for each breed (use the <code>floor()</code> function)? For which breed does she have to pay the most (you can use the <code>max()</code> function for this)?</li>
</ol></li>
<li>Store the data from task 6 in a tibble. Name the columns <code>breed</code>, <code>number_timepoint_1</code>, <code>number_timepoint_2</code>, <code>number of tax units</code>.
a.Which variable should be converted to a factor variable?
<ol start="2" style="list-style-type: lower-alpha">
<li>What’s the difference in numbers between time point 1 and time point 2? Store the result in a vector named <code>difference</code>.</li>
</ol></li>
</ol>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="exercises.html#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1</span></span>
<span id="cb558-2"><a href="exercises.html#cb558-2" aria-hidden="true" tabindex="-1"></a><span class="co">#a</span></span>
<span id="cb558-3"><a href="exercises.html#cb558-3" aria-hidden="true" tabindex="-1"></a>animals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">chicken =</span> <span class="dv">53323</span>, <span class="at">cows =</span> <span class="dv">1334</span>, <span class="at">horses =</span> <span class="dv">4323</span>)</span>
<span id="cb558-4"><a href="exercises.html#cb558-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb558-5"><a href="exercises.html#cb558-5" aria-hidden="true" tabindex="-1"></a><span class="co">#b</span></span>
<span id="cb558-6"><a href="exercises.html#cb558-6" aria-hidden="true" tabindex="-1"></a>bred_animals <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(animals <span class="sc">*</span> <span class="fu">c</span>(<span class="fl">1.75</span>, <span class="fl">1.3</span>, <span class="fl">1.5</span>))</span>
<span id="cb558-7"><a href="exercises.html#cb558-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb558-8"><a href="exercises.html#cb558-8" aria-hidden="true" tabindex="-1"></a><span class="co">#c</span></span>
<span id="cb558-9"><a href="exercises.html#cb558-9" aria-hidden="true" tabindex="-1"></a>taxes <span class="ot">&lt;-</span> <span class="fu">floor</span>(bred_animals<span class="sc">/</span><span class="dv">2000</span>)</span>
<span id="cb558-10"><a href="exercises.html#cb558-10" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(taxes)</span>
<span id="cb558-11"><a href="exercises.html#cb558-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb558-12"><a href="exercises.html#cb558-12" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb558-13"><a href="exercises.html#cb558-13" aria-hidden="true" tabindex="-1"></a>animal_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb558-14"><a href="exercises.html#cb558-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">breed =</span> <span class="fu">names</span>(animals),</span>
<span id="cb558-15"><a href="exercises.html#cb558-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">number_timepoint_1 =</span> animals,</span>
<span id="cb558-16"><a href="exercises.html#cb558-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">number_timepoint_2 =</span> bred_animals,</span>
<span id="cb558-17"><a href="exercises.html#cb558-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">number of tax units</span><span class="st">`</span> <span class="ot">=</span> taxes</span>
<span id="cb558-18"><a href="exercises.html#cb558-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb558-19"><a href="exercises.html#cb558-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb558-20"><a href="exercises.html#cb558-20" aria-hidden="true" tabindex="-1"></a><span class="co">#a</span></span>
<span id="cb558-21"><a href="exercises.html#cb558-21" aria-hidden="true" tabindex="-1"></a><span class="co">#breed</span></span>
<span id="cb558-22"><a href="exercises.html#cb558-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb558-23"><a href="exercises.html#cb558-23" aria-hidden="true" tabindex="-1"></a><span class="co">#b</span></span>
<span id="cb558-24"><a href="exercises.html#cb558-24" aria-hidden="true" tabindex="-1"></a>difference <span class="ot">&lt;-</span> animal_tibble[[<span class="st">&quot;number_timepoint_2&quot;</span>]] <span class="sc">-</span> animal_tibble[[<span class="st">&quot;number_timepoint_1&quot;</span>]]</span></code></pre></div>
</details>
</div>
<div id="chapter-4" class="section level2" number="13.3">
<h2><span class="header-section-number">13.3</span> Chapter 4</h2>
<p>Firstly, download and extract <a href="https://www.dropbox.com/s/ptnot75sed1lupx/training-files.zip?dl=0">the zip file</a>. Then…</p>
<p>Read them in using the right functions. Specify the parameters properly. Hints can be found in hints.md. Each file should be stored in an object, names should correspond to the file names.</p>
<p>Bring the data sets into a tidy format. Store the tidy data sets in a new object, named like the former object plus the suffix "_tidy" – e.g., <code>books_tidy</code>. If no tidying is needed, you do not have to create a new object. The pipe operator should be used to connect the different steps.</p>
<p>Note: this is challenging, absolutely. If you have problems, try to google the different functions and think about what the different parameters indicate. If that is to no avail, send me an e-mail. I am very happy to provide you further assistance.</p>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="exercises.html#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb559-2"><a href="exercises.html#cb559-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb559-3"><a href="exercises.html#cb559-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-4"><a href="exercises.html#cb559-4" aria-hidden="true" tabindex="-1"></a><span class="co">#read-in</span></span>
<span id="cb559-5"><a href="exercises.html#cb559-5" aria-hidden="true" tabindex="-1"></a><span class="co">#books</span></span>
<span id="cb559-6"><a href="exercises.html#cb559-6" aria-hidden="true" tabindex="-1"></a>books <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;books.tsv&quot;</span>)</span>
<span id="cb559-7"><a href="exercises.html#cb559-7" aria-hidden="true" tabindex="-1"></a>books <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;books.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;|&quot;</span>) <span class="co">#alternatively</span></span>
<span id="cb559-8"><a href="exercises.html#cb559-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-9"><a href="exercises.html#cb559-9" aria-hidden="true" tabindex="-1"></a><span class="co">#ches</span></span>
<span id="cb559-10"><a href="exercises.html#cb559-10" aria-hidden="true" tabindex="-1"></a>ches_2017_tidy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;ches_2017.csv&quot;</span>)</span>
<span id="cb559-11"><a href="exercises.html#cb559-11" aria-hidden="true" tabindex="-1"></a>ches_2017_modified <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;ches_2017_modified.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb559-12"><a href="exercises.html#cb559-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-13"><a href="exercises.html#cb559-13" aria-hidden="true" tabindex="-1"></a><span class="co">#publishers</span></span>
<span id="cb559-14"><a href="exercises.html#cb559-14" aria-hidden="true" tabindex="-1"></a>publishers1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;publishers.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;publishers_a-l&quot;</span>) </span>
<span id="cb559-15"><a href="exercises.html#cb559-15" aria-hidden="true" tabindex="-1"></a>publishers2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;publishers.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;publishers_m-z&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-16"><a href="exercises.html#cb559-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">city =</span> place)</span>
<span id="cb559-17"><a href="exercises.html#cb559-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-18"><a href="exercises.html#cb559-18" aria-hidden="true" tabindex="-1"></a><span class="co">#spotify</span></span>
<span id="cb559-19"><a href="exercises.html#cb559-19" aria-hidden="true" tabindex="-1"></a>spotify2018 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;spotify2018.csv&quot;</span>)</span>
<span id="cb559-20"><a href="exercises.html#cb559-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-21"><a href="exercises.html#cb559-21" aria-hidden="true" tabindex="-1"></a><span class="co">#tidying</span></span>
<span id="cb559-22"><a href="exercises.html#cb559-22" aria-hidden="true" tabindex="-1"></a><span class="co">#books</span></span>
<span id="cb559-23"><a href="exercises.html#cb559-23" aria-hidden="true" tabindex="-1"></a>books_tidy <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;books.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;|&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-24"><a href="exercises.html#cb559-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">&quot;author&quot;</span>, <span class="at">into=</span> <span class="fu">c</span>(<span class="st">&quot;author_1&quot;</span>, <span class="st">&quot;author_2&quot;</span>), <span class="at">sep =</span> <span class="st">&quot; and &quot;</span>)</span>
<span id="cb559-25"><a href="exercises.html#cb559-25" aria-hidden="true" tabindex="-1"></a>books_tidy_rows <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;books.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;|&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-26"><a href="exercises.html#cb559-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(author, <span class="at">sep =</span> <span class="fu">c</span>(<span class="st">&quot; and &quot;</span>))</span>
<span id="cb559-27"><a href="exercises.html#cb559-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-28"><a href="exercises.html#cb559-28" aria-hidden="true" tabindex="-1"></a><span class="co"># There also is &quot; with &quot; as a potential separator -- separate() only takes a sep argument of length 1. You could replace &quot; with &quot; with &quot; and &quot; beforehand using `str_replace_all` -- but more on this in Chapter 6</span></span>
<span id="cb559-29"><a href="exercises.html#cb559-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-30"><a href="exercises.html#cb559-30" aria-hidden="true" tabindex="-1"></a>books_really_tidy_rows <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;books.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;|&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-31"><a href="exercises.html#cb559-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">author =</span> <span class="fu">str_replace_all</span>(author, <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">&quot; with &quot;</span> <span class="ot">=</span> <span class="st">&quot; and &quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb559-32"><a href="exercises.html#cb559-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(author, <span class="at">sep =</span> <span class="fu">c</span>(<span class="st">&quot; and &quot;</span>))</span>
<span id="cb559-33"><a href="exercises.html#cb559-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-34"><a href="exercises.html#cb559-34" aria-hidden="true" tabindex="-1"></a><span class="co">#ches</span></span>
<span id="cb559-35"><a href="exercises.html#cb559-35" aria-hidden="true" tabindex="-1"></a>ches_2017_tidy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;ches_2017.csv&quot;</span>)</span>
<span id="cb559-36"><a href="exercises.html#cb559-36" aria-hidden="true" tabindex="-1"></a>ches_2017_modified_tidy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;ches_2017_modified.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb559-37"><a href="exercises.html#cb559-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable)</span>
<span id="cb559-38"><a href="exercises.html#cb559-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-39"><a href="exercises.html#cb559-39" aria-hidden="true" tabindex="-1"></a><span class="co">#publishers</span></span>
<span id="cb559-40"><a href="exercises.html#cb559-40" aria-hidden="true" tabindex="-1"></a>publishers1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;publishers.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;publishers_a-l&quot;</span>) </span>
<span id="cb559-41"><a href="exercises.html#cb559-41" aria-hidden="true" tabindex="-1"></a>publishers2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;publishers.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;publishers_m-z&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-42"><a href="exercises.html#cb559-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">city =</span> place)</span>
<span id="cb559-43"><a href="exercises.html#cb559-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-44"><a href="exercises.html#cb559-44" aria-hidden="true" tabindex="-1"></a>publishers_tidy <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(publishers1, publishers2) <span class="sc">%&gt;%</span> </span>
<span id="cb559-45"><a href="exercises.html#cb559-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> city, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;city&quot;</span>, <span class="st">&quot;state&quot;</span>), <span class="at">sep=</span><span class="st">&quot;, &quot;</span>)</span>
<span id="cb559-46"><a href="exercises.html#cb559-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-47"><a href="exercises.html#cb559-47" aria-hidden="true" tabindex="-1"></a><span class="co">#spotify</span></span>
<span id="cb559-48"><a href="exercises.html#cb559-48" aria-hidden="true" tabindex="-1"></a>spotify2018 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;spotify2018.csv&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="chapter-5" class="section level2" number="13.4">
<h2><span class="header-section-number">13.4</span> Chapter 5</h2>
<p>Open the <a href="https://www.dropbox.com/s/81o3zzdkw737vt0/imdb2006-2016.csv?dl=0">IMDb file</a>.</p>
<ol style="list-style-type: decimal">
<li>Find the duplicated movie. How could you go across this?</li>
<li>Which director has made the longest movie?</li>
<li>What’s the highest ranked movie?</li>
<li>Which movie got the most votes?</li>
<li>Which movie had the biggest revenue in 2016?</li>
<li>How much revenue did the movies in the dataset make each year in total?</li>
<li>Filter movies following some conditions:
<ol style="list-style-type: lower-alpha">
<li>More runtime than the average runtime (hint: you could also use <code>mutate()</code> before).</li>
<li>Movies directed by J. J. Abrams.</li>
<li>More votes than the median of all of the votes.</li>
<li>The movies which have the most common value (the mode) in terms of rating (<code>mode()</code> does exist but will not work in the way you might like it to work – run the script below and use the <code>my_mode</code> function).</li>
</ol></li>
</ol>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="exercises.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="do">## helper function for mode</span></span>
<span id="cb560-2"><a href="exercises.html#cb560-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb560-3"><a href="exercises.html#cb560-3" aria-hidden="true" tabindex="-1"></a>my_mode <span class="ot">&lt;-</span> <span class="cf">function</span>(x){ </span>
<span id="cb560-4"><a href="exercises.html#cb560-4" aria-hidden="true" tabindex="-1"></a>    ta <span class="ot">=</span> <span class="fu">table</span>(x)</span>
<span id="cb560-5"><a href="exercises.html#cb560-5" aria-hidden="true" tabindex="-1"></a>    tam <span class="ot">=</span> <span class="fu">max</span>(ta)</span>
<span id="cb560-6"><a href="exercises.html#cb560-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">all</span>(ta <span class="sc">==</span> tam))</span>
<span id="cb560-7"><a href="exercises.html#cb560-7" aria-hidden="true" tabindex="-1"></a>         mod <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb560-8"><a href="exercises.html#cb560-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb560-9"><a href="exercises.html#cb560-9" aria-hidden="true" tabindex="-1"></a>         <span class="cf">if</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb560-10"><a href="exercises.html#cb560-10" aria-hidden="true" tabindex="-1"></a>    mod <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">names</span>(ta)[ta <span class="sc">==</span> tam])</span>
<span id="cb560-11"><a href="exercises.html#cb560-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb560-12"><a href="exercises.html#cb560-12" aria-hidden="true" tabindex="-1"></a>         mod <span class="ot">=</span> <span class="fu">names</span>(ta)[ta <span class="sc">==</span> tam]</span>
<span id="cb560-13"><a href="exercises.html#cb560-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(mod)</span>
<span id="cb560-14"><a href="exercises.html#cb560-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="exercises.html#cb561-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;imdb2006-2016.csv&quot;</span>)</span>
<span id="cb561-2"><a href="exercises.html#cb561-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-3"><a href="exercises.html#cb561-3" aria-hidden="true" tabindex="-1"></a><span class="co">#1 </span></span>
<span id="cb561-4"><a href="exercises.html#cb561-4" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> <span class="fu">count</span>(Title) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>n)</span>
<span id="cb561-5"><a href="exercises.html#cb561-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-6"><a href="exercises.html#cb561-6" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb561-7"><a href="exercises.html#cb561-7" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-8"><a href="exercises.html#cb561-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Runtime (Minutes)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-9"><a href="exercises.html#cb561-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-10"><a href="exercises.html#cb561-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Director)</span>
<span id="cb561-11"><a href="exercises.html#cb561-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-12"><a href="exercises.html#cb561-12" aria-hidden="true" tabindex="-1"></a><span class="co">#3</span></span>
<span id="cb561-13"><a href="exercises.html#cb561-13" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-14"><a href="exercises.html#cb561-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Rank) <span class="sc">%&gt;%</span> </span>
<span id="cb561-15"><a href="exercises.html#cb561-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-16"><a href="exercises.html#cb561-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Title)</span>
<span id="cb561-17"><a href="exercises.html#cb561-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-18"><a href="exercises.html#cb561-18" aria-hidden="true" tabindex="-1"></a><span class="co">#4</span></span>
<span id="cb561-19"><a href="exercises.html#cb561-19" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-20"><a href="exercises.html#cb561-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>Votes) <span class="sc">%&gt;%</span> </span>
<span id="cb561-21"><a href="exercises.html#cb561-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-22"><a href="exercises.html#cb561-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Title)</span>
<span id="cb561-23"><a href="exercises.html#cb561-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-24"><a href="exercises.html#cb561-24" aria-hidden="true" tabindex="-1"></a><span class="co">#5</span></span>
<span id="cb561-25"><a href="exercises.html#cb561-25" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-26"><a href="exercises.html#cb561-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2016</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-27"><a href="exercises.html#cb561-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Revenue (Millions)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-28"><a href="exercises.html#cb561-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb561-29"><a href="exercises.html#cb561-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Title)</span>
<span id="cb561-30"><a href="exercises.html#cb561-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-31"><a href="exercises.html#cb561-31" aria-hidden="true" tabindex="-1"></a><span class="co">#6</span></span>
<span id="cb561-32"><a href="exercises.html#cb561-32" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-33"><a href="exercises.html#cb561-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Revenue (Millions)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb561-34"><a href="exercises.html#cb561-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb561-35"><a href="exercises.html#cb561-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_revenue =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Revenue (Millions)</span><span class="st">`</span>))</span>
<span id="cb561-36"><a href="exercises.html#cb561-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-37"><a href="exercises.html#cb561-37" aria-hidden="true" tabindex="-1"></a><span class="co">#7a</span></span>
<span id="cb561-38"><a href="exercises.html#cb561-38" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-39"><a href="exercises.html#cb561-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Runtime (Minutes)</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Runtime (Minutes)</span><span class="st">`</span>))</span>
<span id="cb561-40"><a href="exercises.html#cb561-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-41"><a href="exercises.html#cb561-41" aria-hidden="true" tabindex="-1"></a><span class="co">#7b</span></span>
<span id="cb561-42"><a href="exercises.html#cb561-42" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-43"><a href="exercises.html#cb561-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Director <span class="sc">==</span> <span class="st">&quot;J.J. Abrams&quot;</span>)</span>
<span id="cb561-44"><a href="exercises.html#cb561-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-45"><a href="exercises.html#cb561-45" aria-hidden="true" tabindex="-1"></a><span class="co">#7c</span></span>
<span id="cb561-46"><a href="exercises.html#cb561-46" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-47"><a href="exercises.html#cb561-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Votes <span class="sc">&gt;</span> <span class="fu">median</span>(Votes))</span>
<span id="cb561-48"><a href="exercises.html#cb561-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-49"><a href="exercises.html#cb561-49" aria-hidden="true" tabindex="-1"></a><span class="co">#7d</span></span>
<span id="cb561-50"><a href="exercises.html#cb561-50" aria-hidden="true" tabindex="-1"></a><span class="do">## helper function for mode</span></span>
<span id="cb561-51"><a href="exercises.html#cb561-51" aria-hidden="true" tabindex="-1"></a>my_mode <span class="ot">&lt;-</span> <span class="cf">function</span>(x){ </span>
<span id="cb561-52"><a href="exercises.html#cb561-52" aria-hidden="true" tabindex="-1"></a>    ta <span class="ot">=</span> <span class="fu">table</span>(x)</span>
<span id="cb561-53"><a href="exercises.html#cb561-53" aria-hidden="true" tabindex="-1"></a>    tam <span class="ot">=</span> <span class="fu">max</span>(ta)</span>
<span id="cb561-54"><a href="exercises.html#cb561-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">all</span>(ta <span class="sc">==</span> tam))</span>
<span id="cb561-55"><a href="exercises.html#cb561-55" aria-hidden="true" tabindex="-1"></a>         mod <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb561-56"><a href="exercises.html#cb561-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb561-57"><a href="exercises.html#cb561-57" aria-hidden="true" tabindex="-1"></a>         <span class="cf">if</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb561-58"><a href="exercises.html#cb561-58" aria-hidden="true" tabindex="-1"></a>    mod <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">names</span>(ta)[ta <span class="sc">==</span> tam])</span>
<span id="cb561-59"><a href="exercises.html#cb561-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb561-60"><a href="exercises.html#cb561-60" aria-hidden="true" tabindex="-1"></a>         mod <span class="ot">=</span> <span class="fu">names</span>(ta)[ta <span class="sc">==</span> tam]</span>
<span id="cb561-61"><a href="exercises.html#cb561-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(mod)</span>
<span id="cb561-62"><a href="exercises.html#cb561-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb561-63"><a href="exercises.html#cb561-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-64"><a href="exercises.html#cb561-64" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb561-65"><a href="exercises.html#cb561-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Rating <span class="sc">==</span> <span class="fu">my_mode</span>(Rating))</span></code></pre></div>
</details>
</div>
<div id="chapter-6" class="section level2" number="13.5">
<h2><span class="header-section-number">13.5</span> Chapter 6</h2>
<p>1.Write a regex for Swedish mobile number. Test it with <code>str_detect("+46 71-738 25 33", "[insert your regex here]")</code>.
2. There are different character classes. Write the regex expression for the character classes alnum (letters and numbers), alpha (letters), digit (digits), lower (lowercase letters), upper (uppercase letters), and space (different sorts of whitespace).
3. Remember the vector of heights?
a. How can you extract the meters using the negative look behind?
b. Bring it into numeric format (i.e., your_solution == c(1.3, 2.01, 3.1)) using regexes and <code>stringr</code> commands.
4. Find all Mercedes in the <code>mtcars</code> data set.
5. Take the <a href="https://www.dropbox.com/s/81o3zzdkw737vt0/imdb2006-2016.csv?dl=0">IMDb file</a> and split the <code>Genre</code> column into different columns (hint: look at the <code>tidyr::separate()</code> function). How would you do it if <code>Genre</code> were a vector using <code>str_split_fixed()</code>?</p>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="exercises.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1</span></span>
<span id="cb562-2"><a href="exercises.html#cb562-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">&quot;+46 71-738 25 33&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">+46 [0-9]{2}</span><span class="sc">\\</span><span class="st">-[0-9]{3} [0-9]{2} [0-9]{2}&quot;</span>)</span>
<span id="cb562-3"><a href="exercises.html#cb562-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-4"><a href="exercises.html#cb562-4" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb562-5"><a href="exercises.html#cb562-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-6"><a href="exercises.html#cb562-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-7"><a href="exercises.html#cb562-7" aria-hidden="true" tabindex="-1"></a><span class="co">#3</span></span>
<span id="cb562-8"><a href="exercises.html#cb562-8" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1m30cm&quot;</span>, <span class="st">&quot;2m01cm&quot;</span>, <span class="st">&quot;3m10cm&quot;</span>)</span>
<span id="cb562-9"><a href="exercises.html#cb562-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-10"><a href="exercises.html#cb562-10" aria-hidden="true" tabindex="-1"></a><span class="co">#a</span></span>
<span id="cb562-11"><a href="exercises.html#cb562-11" aria-hidden="true" tabindex="-1"></a>meters <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(heights, <span class="st">&quot;(?&lt;!m)[0-9]&quot;</span>)</span>
<span id="cb562-12"><a href="exercises.html#cb562-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-13"><a href="exercises.html#cb562-13" aria-hidden="true" tabindex="-1"></a><span class="co">#b</span></span>
<span id="cb562-14"><a href="exercises.html#cb562-14" aria-hidden="true" tabindex="-1"></a>for_test <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(heights, <span class="st">&quot;(?&lt;=[0-9])m&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb562-15"><a href="exercises.html#cb562-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;cm&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb562-16"><a href="exercises.html#cb562-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() </span>
<span id="cb562-17"><a href="exercises.html#cb562-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-18"><a href="exercises.html#cb562-18" aria-hidden="true" tabindex="-1"></a>for_test <span class="sc">==</span> <span class="fu">c</span>(<span class="fl">1.3</span>, <span class="fl">2.01</span>, <span class="fl">3.1</span>)</span>
<span id="cb562-19"><a href="exercises.html#cb562-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-20"><a href="exercises.html#cb562-20" aria-hidden="true" tabindex="-1"></a><span class="co">#4</span></span>
<span id="cb562-21"><a href="exercises.html#cb562-21" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb562-22"><a href="exercises.html#cb562-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;model&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb562-23"><a href="exercises.html#cb562-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(model, <span class="st">&quot;Merc&quot;</span>))</span>
<span id="cb562-24"><a href="exercises.html#cb562-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-25"><a href="exercises.html#cb562-25" aria-hidden="true" tabindex="-1"></a><span class="co">#5</span></span>
<span id="cb562-26"><a href="exercises.html#cb562-26" aria-hidden="true" tabindex="-1"></a>imdb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;imdb2006-2016.csv&quot;</span>)</span>
<span id="cb562-27"><a href="exercises.html#cb562-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-28"><a href="exercises.html#cb562-28" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb562-29"><a href="exercises.html#cb562-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Genre, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;genre_1&quot;</span>, <span class="st">&quot;genre_2&quot;</span>, <span class="st">&quot;genre_3&quot;</span>))</span>
<span id="cb562-30"><a href="exercises.html#cb562-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-31"><a href="exercises.html#cb562-31" aria-hidden="true" tabindex="-1"></a>imdb<span class="sc">$</span>Genre <span class="sc">%&gt;%</span> </span>
<span id="cb562-32"><a href="exercises.html#cb562-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_fixed</span>(<span class="at">pattern =</span> <span class="st">&quot;,&quot;</span>, <span class="dv">3</span>)</span></code></pre></div>
</details>
</div>
<div id="chapter-7" class="section level2" number="13.6">
<h2><span class="header-section-number">13.6</span> Chapter 7</h2>
<p>For now, I will not include too many exercises in here. However, you will have to work with factors extensively when we come to data visualization.</p>
<p>Read in the <a href="https://www.dropbox.com/s/c9llcbln6jui1t8/ess2016_ger.csv?dl=0">ESS file</a>.</p>
<ol style="list-style-type: decimal">
<li>Convert the variable <code>party_vote</code> into a factor variable called <code>party_code_fct</code>. Drop all other variables.</li>
<li>Look at the distribution of the parties; keep the 4 most common ones, all others should be coded to <code>Other</code>. Do it using the following three functions. Which of them was the best for the job?
<ol style="list-style-type: lower-alpha">
<li>using <code>fct_recode()</code></li>
<li>using <code>fct_collapse()</code></li>
<li>using <code>fct_lump()</code></li>
</ol></li>
<li>Reorder the factor levels according to their number of occurrence.</li>
</ol>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="exercises.html#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="co">#read file</span></span>
<span id="cb563-2"><a href="exercises.html#cb563-2" aria-hidden="true" tabindex="-1"></a>ess_2016 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;ess2016_ger.csv&quot;</span>)</span>
<span id="cb563-3"><a href="exercises.html#cb563-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-4"><a href="exercises.html#cb563-4" aria-hidden="true" tabindex="-1"></a><span class="co">#1 </span></span>
<span id="cb563-5"><a href="exercises.html#cb563-5" aria-hidden="true" tabindex="-1"></a>ess_w_factor <span class="ot">&lt;-</span> ess_2016 <span class="sc">%&gt;%</span> </span>
<span id="cb563-6"><a href="exercises.html#cb563-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_code_fct =</span> <span class="fu">as_factor</span>(party_vote)) <span class="sc">%&gt;%</span> </span>
<span id="cb563-7"><a href="exercises.html#cb563-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(party_code_fct)</span>
<span id="cb563-8"><a href="exercises.html#cb563-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-9"><a href="exercises.html#cb563-9" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb563-10"><a href="exercises.html#cb563-10" aria-hidden="true" tabindex="-1"></a>ess_w_factor <span class="sc">%&gt;%</span> </span>
<span id="cb563-11"><a href="exercises.html#cb563-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(party_code_fct) <span class="sc">%&gt;%</span> </span>
<span id="cb563-12"><a href="exercises.html#cb563-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(party_code_fct)) <span class="sc">%&gt;%</span> </span>
<span id="cb563-13"><a href="exercises.html#cb563-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n)</span>
<span id="cb563-14"><a href="exercises.html#cb563-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-15"><a href="exercises.html#cb563-15" aria-hidden="true" tabindex="-1"></a><span class="co">#2a</span></span>
<span id="cb563-16"><a href="exercises.html#cb563-16" aria-hidden="true" tabindex="-1"></a>ess_recoded <span class="ot">&lt;-</span> ess_w_factor <span class="sc">%&gt;%</span> </span>
<span id="cb563-17"><a href="exercises.html#cb563-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_code_fct =</span> <span class="fu">fct_recode</span>(party_code_fct,</span>
<span id="cb563-18"><a href="exercises.html#cb563-18" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">Other =</span> <span class="st">&quot;AfD&quot;</span>,</span>
<span id="cb563-19"><a href="exercises.html#cb563-19" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">Other =</span> <span class="st">&quot;FDP&quot;</span>,</span>
<span id="cb563-20"><a href="exercises.html#cb563-20" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">Other =</span> <span class="st">&quot;Andere Partei&quot;</span>,</span>
<span id="cb563-21"><a href="exercises.html#cb563-21" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">Other =</span> <span class="st">&quot;Piratenpartei&quot;</span>,</span>
<span id="cb563-22"><a href="exercises.html#cb563-22" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">Other =</span> <span class="st">&quot;NPD&quot;</span>))</span>
<span id="cb563-23"><a href="exercises.html#cb563-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-24"><a href="exercises.html#cb563-24" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(ess_recoded$party_code_fct) # for validating that it has worked</span></span>
<span id="cb563-25"><a href="exercises.html#cb563-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-26"><a href="exercises.html#cb563-26" aria-hidden="true" tabindex="-1"></a><span class="co">#2b</span></span>
<span id="cb563-27"><a href="exercises.html#cb563-27" aria-hidden="true" tabindex="-1"></a>ess_collapsed <span class="ot">&lt;-</span> ess_w_factor <span class="sc">%&gt;%</span> </span>
<span id="cb563-28"><a href="exercises.html#cb563-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_code_fct =</span> <span class="fu">fct_collapse</span>(party_code_fct,</span>
<span id="cb563-29"><a href="exercises.html#cb563-29" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">Other =</span> <span class="fu">c</span>(<span class="st">&quot;AfD&quot;</span>, <span class="st">&quot;FDP&quot;</span>, <span class="st">&quot;Andere Partei&quot;</span>, <span class="st">&quot;Piratenpartei&quot;</span>, <span class="st">&quot;NPD&quot;</span>)))</span>
<span id="cb563-30"><a href="exercises.html#cb563-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-31"><a href="exercises.html#cb563-31" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(ess_collapsed$party_code_fct) # for validating that it has worked</span></span>
<span id="cb563-32"><a href="exercises.html#cb563-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-33"><a href="exercises.html#cb563-33" aria-hidden="true" tabindex="-1"></a><span class="co">#2c</span></span>
<span id="cb563-34"><a href="exercises.html#cb563-34" aria-hidden="true" tabindex="-1"></a>ess_lumped <span class="ot">&lt;-</span> ess_w_factor <span class="sc">%&gt;%</span> </span>
<span id="cb563-35"><a href="exercises.html#cb563-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_code_fct =</span> <span class="fu">fct_lump</span>(party_code_fct, <span class="at">n =</span> <span class="dv">4</span>))</span>
<span id="cb563-36"><a href="exercises.html#cb563-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-37"><a href="exercises.html#cb563-37" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(ess_collapsed$party_code_fct) # for validating that it has worked</span></span>
<span id="cb563-38"><a href="exercises.html#cb563-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-39"><a href="exercises.html#cb563-39" aria-hidden="true" tabindex="-1"></a><span class="co">#3</span></span>
<span id="cb563-40"><a href="exercises.html#cb563-40" aria-hidden="true" tabindex="-1"></a>ess_ordered <span class="ot">&lt;-</span> ess_w_factor <span class="sc">%&gt;%</span> </span>
<span id="cb563-41"><a href="exercises.html#cb563-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(party_code_fct) <span class="sc">%&gt;%</span> </span>
<span id="cb563-42"><a href="exercises.html#cb563-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_code_fct =</span> <span class="fu">fct_reorder</span>(party_code_fct, n))</span>
<span id="cb563-43"><a href="exercises.html#cb563-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb563-44"><a href="exercises.html#cb563-44" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(ess_ordered$party_code_fct) # for validating that it has worked</span></span></code></pre></div>
</details>
</div>
<div id="chapter-8" class="section level2" number="13.7">
<h2><span class="header-section-number">13.7</span> Chapter 8</h2>
<p>Take the <a href="https://www.dropbox.com/s/81o3zzdkw737vt0/imdb2006-2016.csv?dl=0">IMDb file</a>.</p>
<ol style="list-style-type: decimal">
<li>Create a descriptive tibble containing the numeric variables which is sort of publishable (i.e., so that you could put it into a <code>flextable</code> or <code>kable</code> call). No need to discuss the results though.</li>
<li>Does it make sense to use the arithmetic mean? Calculate the median and include it in the results for the numeric variables.</li>
</ol>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="exercises.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb564-2"><a href="exercises.html#cb564-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb564-3"><a href="exercises.html#cb564-3" aria-hidden="true" tabindex="-1"></a>imdb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;imdb2006-2016.csv&quot;</span>)</span>
<span id="cb564-4"><a href="exercises.html#cb564-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb564-5"><a href="exercises.html#cb564-5" aria-hidden="true" tabindex="-1"></a><span class="co">#1</span></span>
<span id="cb564-6"><a href="exercises.html#cb564-6" aria-hidden="true" tabindex="-1"></a>for_table <span class="ot">&lt;-</span> imdb <span class="sc">%&gt;%</span> </span>
<span id="cb564-7"><a href="exercises.html#cb564-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb564-8"><a href="exercises.html#cb564-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yank</span>(<span class="st">&quot;numeric&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb564-9"><a href="exercises.html#cb564-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Variable =</span> <span class="dv">1</span>,</span>
<span id="cb564-10"><a href="exercises.html#cb564-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Mean =</span> <span class="dv">4</span>,</span>
<span id="cb564-11"><a href="exercises.html#cb564-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">SD =</span> <span class="dv">5</span>,</span>
<span id="cb564-12"><a href="exercises.html#cb564-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Minimum =</span> <span class="dv">6</span>,</span>
<span id="cb564-13"><a href="exercises.html#cb564-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">Maximum =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb564-14"><a href="exercises.html#cb564-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">1</span>)))</span>
<span id="cb564-15"><a href="exercises.html#cb564-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb564-16"><a href="exercises.html#cb564-16" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb564-17"><a href="exercises.html#cb564-17" aria-hidden="true" tabindex="-1"></a>median_joined <span class="ot">&lt;-</span> imdb <span class="sc">%&gt;%</span> </span>
<span id="cb564-18"><a href="exercises.html#cb564-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb564-19"><a href="exercises.html#cb564-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb564-20"><a href="exercises.html#cb564-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb564-21"><a href="exercises.html#cb564-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;Variable&quot;</span>)</span>
<span id="cb564-22"><a href="exercises.html#cb564-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb564-23"><a href="exercises.html#cb564-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb564-24"><a href="exercises.html#cb564-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Median =</span> value) <span class="sc">%&gt;%</span> </span>
<span id="cb564-25"><a href="exercises.html#cb564-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(for_table)</span></code></pre></div>
</details>
</div>
<div id="chapter-9" class="section level2" number="13.8">
<h2><span class="header-section-number">13.8</span> Chapter 9</h2>
<p>Take the <a href="https://www.dropbox.com/s/81o3zzdkw737vt0/imdb2006-2016.csv?dl=0">IMDb file</a>.</p>
<p>Try to think about how you could answer the following questions graphically. If you fail, take a look at the hints.</p>
<ol style="list-style-type: decimal">
<li>Do higher rated movies generate more revenue?
<ol style="list-style-type: lower-alpha">
<li>Plot revenue and rating as a scatter plot.</li>
<li>Do you think there is a correlation? How could you make stronger claims about it? Maybe even graphically?</li>
<li>Interpret the plot.</li>
<li>Add a nice title and labels.</li>
</ol></li>
<li>How evenly are the different years’ movies represented? (Why would it be pointless to make claims about the productivity of directors?)
<ol style="list-style-type: lower-alpha">
<li>Make a bar plot.</li>
<li>Interpret the plot.</li>
<li>Add a nice title and labels.</li>
</ol></li>
<li>Which year was the best for cinema fetishists? (When could they watch the most highest rated movies?)
<ol style="list-style-type: lower-alpha">
<li>Make a box plot.</li>
<li>Interpret the plot.</li>
<li>Add a nice title and labels.</li>
</ol></li>
</ol>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="exercises.html#cb565-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;imdb2006-2016.csv&quot;</span>)</span>
<span id="cb565-2"><a href="exercises.html#cb565-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-3"><a href="exercises.html#cb565-3" aria-hidden="true" tabindex="-1"></a><span class="co">#1</span></span>
<span id="cb565-4"><a href="exercises.html#cb565-4" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb565-5"><a href="exercises.html#cb565-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb565-6"><a href="exercises.html#cb565-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(Rating, <span class="st">`</span><span class="at">Revenue (Millions)</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb565-7"><a href="exercises.html#cb565-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(Rating, <span class="st">`</span><span class="at">Revenue (Millions)</span><span class="st">`</span>), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb565-8"><a href="exercises.html#cb565-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Fig. 1: Rating and Revenue; scatter plot with regression line&quot;</span>)</span>
<span id="cb565-9"><a href="exercises.html#cb565-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-10"><a href="exercises.html#cb565-10" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb565-11"><a href="exercises.html#cb565-11" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb565-12"><a href="exercises.html#cb565-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb565-13"><a href="exercises.html#cb565-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year)) <span class="sc">+</span></span>
<span id="cb565-14"><a href="exercises.html#cb565-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2006</span><span class="sc">:</span><span class="dv">2016</span>) <span class="sc">+</span></span>
<span id="cb565-15"><a href="exercises.html#cb565-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;N&quot;</span>,</span>
<span id="cb565-16"><a href="exercises.html#cb565-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Fig. 2: Number of movies in the IMDb data set per year &quot;</span>)</span>
<span id="cb565-17"><a href="exercises.html#cb565-17" aria-hidden="true" tabindex="-1"></a><span class="co">#Not evenly at all!</span></span>
<span id="cb565-18"><a href="exercises.html#cb565-18" aria-hidden="true" tabindex="-1"></a><span class="co">#It, of course, wouldn&#39;t make sense because we&#39;re only having a sample of the data here.</span></span>
<span id="cb565-19"><a href="exercises.html#cb565-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-20"><a href="exercises.html#cb565-20" aria-hidden="true" tabindex="-1"></a><span class="co">#3</span></span>
<span id="cb565-21"><a href="exercises.html#cb565-21" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb565-22"><a href="exercises.html#cb565-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb565-23"><a href="exercises.html#cb565-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as_factor</span>(Year), <span class="at">y =</span> Rating)) <span class="sc">+</span></span>
<span id="cb565-24"><a href="exercises.html#cb565-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Fig. 3: Boxplots depicting the movies&#39; rating&quot;</span>,</span>
<span id="cb565-25"><a href="exercises.html#cb565-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="chapter-10" class="section level2" number="13.9">
<h2><span class="header-section-number">13.9</span> Chapter 10</h2>
<p>No exercises for RMarkdown. If you want to, you can try to write the next report you have to hand in or something similar in RMarkdown. Hit me up for help and feedback whenever.</p>
</div>
<div id="chapter-11" class="section level2" number="13.10">
<h2><span class="header-section-number">13.10</span> Chapter 11</h2>
<ol style="list-style-type: decimal">
<li>Create a new vector of type character and length 3. Try to fill it with “I” “accomplished” “task2” using a for loop.</li>
<li>Create proper names for the output of the following chunk (i.e., so that the last two columns’ names begin with “mean_”).
<ol style="list-style-type: lower-alpha">
<li>using a <code>for</code> loop.</li>
<li>using <code>map</code> and an anonymous function.</li>
</ol></li>
</ol>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="exercises.html#cb566-1" aria-hidden="true" tabindex="-1"></a>summarize_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(data, vars) {</span>
<span id="cb566-2"><a href="exercises.html#cb566-2" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="fu">across</span>({{ vars }}, mean))</span>
<span id="cb566-3"><a href="exercises.html#cb566-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb566-4"><a href="exercises.html#cb566-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb566-5"><a href="exercises.html#cb566-5" aria-hidden="true" tabindex="-1"></a>means_tbl <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb566-6"><a href="exercises.html#cb566-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb566-7"><a href="exercises.html#cb566-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_mean</span>(<span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">&quot;hp&quot;</span>, <span class="st">&quot;mpg&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb566-8"><a href="exercises.html#cb566-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Use a <code>for</code> loop to compute the <code>median</code> of every numeric column in <code>mtcars</code>. Store it in a vector called <code>median_values</code>. Every element should have the name of the variable and the prefix <code>median_</code>.</li>
<li>Try to store the results of the following <code>pmap()</code> call in a tibble. First call is in first column, second one in the second one, etc. How could you go across this?</li>
<li>Create a <code>rescale0to1</code> function.</li>
<li>Play 10 rounds of Roulette and store the results in a tibble
<ol style="list-style-type: lower-alpha">
<li>using a <code>for</code> loop</li>
<li>using a <code>while</code> loop</li>
<li>using <code>map()</code> (e.g., by storing them in a vector and then calling <code>enframe()</code>)</li>
</ol></li>
<li>Extend the Roulette function (colors!). You will need a lot of if…else. Try to split it up into several functions (e.g., <code>determine_color</code>, <code>determine_return</code>, etc.). Make it “bullet-proof” – how should you go across cases where people bet on a number and a color?
You can use the following code chunk to determine the values and their colors:</li>
</ol>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="exercises.html#cb567-1" aria-hidden="true" tabindex="-1"></a>red_fields <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">19</span>, <span class="dv">21</span>, <span class="dv">25</span>, <span class="dv">34</span>, <span class="dv">27</span>, <span class="dv">36</span>, <span class="dv">30</span>, <span class="dv">23</span>, <span class="dv">5</span>, <span class="dv">16</span>, <span class="dv">1</span>, <span class="dv">14</span>, <span class="dv">9</span>, <span class="dv">18</span>, <span class="dv">7</span>, <span class="dv">12</span>, <span class="dv">3</span>)</span>
<span id="cb567-2"><a href="exercises.html#cb567-2" aria-hidden="true" tabindex="-1"></a>black_fields <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, red_fields)</span>
<span id="cb567-3"><a href="exercises.html#cb567-3" aria-hidden="true" tabindex="-1"></a>zero <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<details>
<summary>
Solution. Click to expand!
</summary>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="exercises.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1</span></span>
<span id="cb568-2"><a href="exercises.html#cb568-2" aria-hidden="true" tabindex="-1"></a>raw_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;accomplished&quot;</span>, <span class="st">&quot;task3&quot;</span>)</span>
<span id="cb568-3"><a href="exercises.html#cb568-3" aria-hidden="true" tabindex="-1"></a>fill_vec <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="at">length =</span> 3L)</span>
<span id="cb568-4"><a href="exercises.html#cb568-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-5"><a href="exercises.html#cb568-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(raw_vec)) {</span>
<span id="cb568-6"><a href="exercises.html#cb568-6" aria-hidden="true" tabindex="-1"></a>  fill_vec[i] <span class="ot">&lt;-</span> raw_vec[i]</span>
<span id="cb568-7"><a href="exercises.html#cb568-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-8"><a href="exercises.html#cb568-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-9"><a href="exercises.html#cb568-9" aria-hidden="true" tabindex="-1"></a><span class="co">#2</span></span>
<span id="cb568-10"><a href="exercises.html#cb568-10" aria-hidden="true" tabindex="-1"></a><span class="co">#a</span></span>
<span id="cb568-11"><a href="exercises.html#cb568-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb568-12"><a href="exercises.html#cb568-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(means_tbl)[i] <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">&quot;mean_&quot;</span>, <span class="fu">colnames</span>(means_tbl)[i])</span>
<span id="cb568-13"><a href="exercises.html#cb568-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-14"><a href="exercises.html#cb568-14" aria-hidden="true" tabindex="-1"></a><span class="co">#b</span></span>
<span id="cb568-15"><a href="exercises.html#cb568-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(means_tbl)[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(<span class="fu">colnames</span>(means_tbl)[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>], <span class="sc">~</span><span class="fu">str_c</span>(<span class="st">&quot;mean_&quot;</span>, .x))</span>
<span id="cb568-16"><a href="exercises.html#cb568-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-17"><a href="exercises.html#cb568-17" aria-hidden="true" tabindex="-1"></a><span class="co">#3</span></span>
<span id="cb568-18"><a href="exercises.html#cb568-18" aria-hidden="true" tabindex="-1"></a>median_values <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="at">length =</span> 11L)</span>
<span id="cb568-19"><a href="exercises.html#cb568-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(mtcars)) {</span>
<span id="cb568-20"><a href="exercises.html#cb568-20" aria-hidden="true" tabindex="-1"></a>  median_values[i] <span class="ot">&lt;-</span> <span class="fu">median</span>(mtcars[ ,i], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb568-21"><a href="exercises.html#cb568-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-22"><a href="exercises.html#cb568-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-23"><a href="exercises.html#cb568-23" aria-hidden="true" tabindex="-1"></a><span class="fu">set_names</span>(median_values, <span class="fu">str_c</span>(<span class="st">&quot;median_&quot;</span>, <span class="fu">colnames</span>(mtcars)))</span>
<span id="cb568-24"><a href="exercises.html#cb568-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-25"><a href="exercises.html#cb568-25" aria-hidden="true" tabindex="-1"></a><span class="co">#4</span></span>
<span id="cb568-26"><a href="exercises.html#cb568-26" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb568-27"><a href="exercises.html#cb568-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb568-28"><a href="exercises.html#cb568-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb568-29"><a href="exercises.html#cb568-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fl">0.5</span></span>
<span id="cb568-30"><a href="exercises.html#cb568-30" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb568-31"><a href="exercises.html#cb568-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap</span>(rnorm) <span class="sc">%&gt;%</span> </span>
<span id="cb568-32"><a href="exercises.html#cb568-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>()</span>
<span id="cb568-33"><a href="exercises.html#cb568-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-34"><a href="exercises.html#cb568-34" aria-hidden="true" tabindex="-1"></a><span class="co">#5</span></span>
<span id="cb568-35"><a href="exercises.html#cb568-35" aria-hidden="true" tabindex="-1"></a>rescale0to1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb568-36"><a href="exercises.html#cb568-36" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> (<span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(x. <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb568-37"><a href="exercises.html#cb568-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-38"><a href="exercises.html#cb568-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-39"><a href="exercises.html#cb568-39" aria-hidden="true" tabindex="-1"></a><span class="co">#6</span></span>
<span id="cb568-40"><a href="exercises.html#cb568-40" aria-hidden="true" tabindex="-1"></a>play_roulette_basic <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">bet =</span> <span class="dv">1</span>, number) {</span>
<span id="cb568-41"><a href="exercises.html#cb568-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (number <span class="sc">&gt;</span> <span class="dv">36</span>) <span class="fu">stop</span>(<span class="st">&quot;You can only bet on numbers between 0 and 36.&quot;</span>)</span>
<span id="cb568-42"><a href="exercises.html#cb568-42" aria-hidden="true" tabindex="-1"></a>  draw <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">36</span>, <span class="dv">1</span>)</span>
<span id="cb568-43"><a href="exercises.html#cb568-43" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (number <span class="sc">==</span> draw) {</span>
<span id="cb568-44"><a href="exercises.html#cb568-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">str_c</span>(<span class="st">&quot;Nice, you won&quot;</span>, <span class="fu">as.character</span>(bet <span class="sc">*</span> <span class="dv">36</span>), <span class="st">&quot;Dollars&quot;</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb568-45"><a href="exercises.html#cb568-45" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb568-46"><a href="exercises.html#cb568-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;I&#39;m sorry, you lost.&quot;</span>)</span>
<span id="cb568-47"><a href="exercises.html#cb568-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb568-48"><a href="exercises.html#cb568-48" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-49"><a href="exercises.html#cb568-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-50"><a href="exercises.html#cb568-50" aria-hidden="true" tabindex="-1"></a><span class="co">#a</span></span>
<span id="cb568-51"><a href="exercises.html#cb568-51" aria-hidden="true" tabindex="-1"></a>results_tbl_for <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb568-52"><a href="exercises.html#cb568-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">result =</span> <span class="fu">character</span>(<span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb568-53"><a href="exercises.html#cb568-53" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb568-54"><a href="exercises.html#cb568-54" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(results_vec)) {</span>
<span id="cb568-55"><a href="exercises.html#cb568-55" aria-hidden="true" tabindex="-1"></a>  results_tbl_for<span class="sc">$</span>result[[i]] <span class="ot">&lt;-</span> <span class="fu">play_roulette_basic</span>(<span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb568-56"><a href="exercises.html#cb568-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-57"><a href="exercises.html#cb568-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-58"><a href="exercises.html#cb568-58" aria-hidden="true" tabindex="-1"></a><span class="co">#b</span></span>
<span id="cb568-59"><a href="exercises.html#cb568-59" aria-hidden="true" tabindex="-1"></a>results_tbl_while <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb568-60"><a href="exercises.html#cb568-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">result =</span> <span class="fu">character</span>(<span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb568-61"><a href="exercises.html#cb568-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb568-62"><a href="exercises.html#cb568-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-63"><a href="exercises.html#cb568-63" aria-hidden="true" tabindex="-1"></a>indicator <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb568-64"><a href="exercises.html#cb568-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-65"><a href="exercises.html#cb568-65" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (indicator <span class="sc">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb568-66"><a href="exercises.html#cb568-66" aria-hidden="true" tabindex="-1"></a>  indicator <span class="ot">&lt;-</span> indicator <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb568-67"><a href="exercises.html#cb568-67" aria-hidden="true" tabindex="-1"></a>  results_tbl_while<span class="sc">$</span>result[[indicator]] <span class="ot">&lt;-</span> <span class="fu">play_roulette_basic</span>(<span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb568-68"><a href="exercises.html#cb568-68" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb568-69"><a href="exercises.html#cb568-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-70"><a href="exercises.html#cb568-70" aria-hidden="true" tabindex="-1"></a><span class="co">#c </span></span>
<span id="cb568-71"><a href="exercises.html#cb568-71" aria-hidden="true" tabindex="-1"></a>results_tbl_map <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, play_roulette_basic, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb568-72"><a href="exercises.html#cb568-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="cn">NULL</span>, <span class="at">value =</span> <span class="st">&quot;result&quot;</span>)</span>
<span id="cb568-73"><a href="exercises.html#cb568-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-74"><a href="exercises.html#cb568-74" aria-hidden="true" tabindex="-1"></a><span class="co">#7 to be done later</span></span></code></pre></div>
</details>

</div>
</div>












            </section>

          </div>
        </div>
      </div>
<a href="references.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction-to-r.pdf", "introduction-to-r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
