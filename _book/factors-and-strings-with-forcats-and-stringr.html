<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Factors and strings with forcats and stringr | An(other) introduction to R</title>
  <meta name="description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Factors and strings with forcats and stringr | An(other) introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Factors and strings with forcats and stringr | An(other) introduction to R" />
  
  <meta name="twitter:description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  

<meta name="author" content="Felix Lennert" />


<meta name="date" content="2021-08-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manipulation-with-dplyr.html"/>
<link rel="next" href="visualizations-with-ggplot2.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prologue</a></li>
<li class="chapter" data-level="2" data-path="introrstudio.html"><a href="introrstudio.html"><i class="fa fa-check"></i><b>2</b> Getting started with RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introrstudio.html"><a href="introrstudio.html#installing-r"><i class="fa fa-check"></i><b>2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introrstudio.html"><a href="introrstudio.html#installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introrstudio.html"><a href="introrstudio.html#setting-up-rstudio"><i class="fa fa-check"></i><b>2.3</b> Setting up RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introrstudio.html"><a href="introrstudio.html#some-remarks-on-your-daily-workflow"><i class="fa fa-check"></i><b>2.4</b> Some remarks on your daily workflow</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introrstudio.html"><a href="introrstudio.html#rstudio-projects"><i class="fa fa-check"></i><b>2.4.1</b> RStudio Projects</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introrstudio.html"><a href="introrstudio.html#r-scripts-and-rmarkdown"><i class="fa fa-check"></i><b>2.5</b> R scripts and RMarkdown</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introrstudio.html"><a href="introrstudio.html#r-scripts"><i class="fa fa-check"></i><b>2.5.1</b> R scripts</a></li>
<li class="chapter" data-level="2.5.2" data-path="introrstudio.html"><a href="introrstudio.html#rmarkdown"><i class="fa fa-check"></i><b>2.5.2</b> RMarkdown</a></li>
<li class="chapter" data-level="2.5.3" data-path="introrstudio.html"><a href="introrstudio.html#further-links"><i class="fa fa-check"></i><b>2.5.3</b> Further links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>3</b> Intro to R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#installing-packages"><i class="fa fa-check"></i><b>3.1</b> Installing packages</a></li>
<li class="chapter" data-level="3.2" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-arithmetic-operations"><i class="fa fa-check"></i><b>3.2</b> Basic arithmetic operations</a></li>
<li class="chapter" data-level="3.3" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i><b>3.3</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#atomic-vectors"><i class="fa fa-check"></i><b>3.3.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="3.3.2" data-path="intro-to-r.html"><a href="intro-to-r.html#working-with-atomic-vectors"><i class="fa fa-check"></i><b>3.3.2</b> Working with atomic vectors</a></li>
<li class="chapter" data-level="3.3.3" data-path="intro-to-r.html"><a href="intro-to-r.html#lists"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="intro-to-r.html"><a href="intro-to-r.html#augmented-vectors"><i class="fa fa-check"></i><b>3.3.4</b> Augmented vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro-to-r.html"><a href="intro-to-r.html#further-links-1"><i class="fa fa-check"></i><b>3.4</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>4</b> Working with data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="working-with-data.html"><a href="working-with-data.html#reading-in-data-sets"><i class="fa fa-check"></i><b>4.1</b> Reading in data sets</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="working-with-data.html"><a href="working-with-data.html#the-working-directory-in-r"><i class="fa fa-check"></i><b>4.1.1</b> The working directory in R</a></li>
<li class="chapter" data-level="4.1.2" data-path="working-with-data.html"><a href="working-with-data.html#readrs-general-functions"><i class="fa fa-check"></i><b>4.1.2</b> <code>readr</code>’s general functions…</a></li>
<li class="chapter" data-level="4.1.3" data-path="working-with-data.html"><a href="working-with-data.html#and-their-additional-arguments"><i class="fa fa-check"></i><b>4.1.3</b> …and their additional arguments</a></li>
<li class="chapter" data-level="4.1.4" data-path="working-with-data.html"><a href="working-with-data.html#column-types"><i class="fa fa-check"></i><b>4.1.4</b> Column types</a></li>
<li class="chapter" data-level="4.1.5" data-path="working-with-data.html"><a href="working-with-data.html#rds-and-.rdatafiles"><i class="fa fa-check"></i><b>4.1.5</b> <code>.rds</code> and <code>.RData</code>files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="working-with-data.html"><a href="working-with-data.html#write-data"><i class="fa fa-check"></i><b>4.2</b> Write data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="working-with-data.html"><a href="working-with-data.html#write_csv"><i class="fa fa-check"></i><b>4.2.1</b> <code>write_csv()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="working-with-data.html"><a href="working-with-data.html#write_rds"><i class="fa fa-check"></i><b>4.2.2</b> <code>write_rds()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="working-with-data.html"><a href="working-with-data.html#save"><i class="fa fa-check"></i><b>4.2.3</b> <code>save()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="working-with-data.html"><a href="working-with-data.html#alternative-ways-to-read-in-and-write-data"><i class="fa fa-check"></i><b>4.3</b> Alternative ways to read in and write data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="working-with-data.html"><a href="working-with-data.html#haven"><i class="fa fa-check"></i><b>4.3.1</b> <code>haven</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="working-with-data.html"><a href="working-with-data.html#readxl"><i class="fa fa-check"></i><b>4.3.2</b> <code>readxl</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="working-with-data.html"><a href="working-with-data.html#vroom"><i class="fa fa-check"></i><b>4.3.3</b> <code>vroom</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="working-with-data.html"><a href="working-with-data.html#further-readings"><i class="fa fa-check"></i><b>4.3.4</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="working-with-data.html"><a href="working-with-data.html#tidy-data"><i class="fa fa-check"></i><b>4.4</b> Tidy data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="working-with-data.html"><a href="working-with-data.html#in-theory"><i class="fa fa-check"></i><b>4.4.1</b> In theory</a></li>
<li class="chapter" data-level="4.4.2" data-path="working-with-data.html"><a href="working-with-data.html#in-practice"><i class="fa fa-check"></i><b>4.4.2</b> In practice</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="working-with-data.html"><a href="working-with-data.html#further-links-2"><i class="fa fa-check"></i><b>4.5</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html"><i class="fa fa-check"></i><b>5</b> Manipulation with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#working-with-the-main-verbs"><i class="fa fa-check"></i><b>5.1</b> Working with the main “verbs”</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#select"><i class="fa fa-check"></i><b>5.1.1</b> <code>select()</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#filter"><i class="fa fa-check"></i><b>5.1.2</b> <code>filter()</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#mutate"><i class="fa fa-check"></i><b>5.1.3</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#summarize-and-group_by"><i class="fa fa-check"></i><b>5.1.4</b> <code>summarize()</code> and <code>group_by</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#arrange"><i class="fa fa-check"></i><b>5.1.5</b> <code>arrange()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#introducing-joins"><i class="fa fa-check"></i><b>5.2</b> Introducing <code>joins</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#multiple-types-of-units-are-in-the-same-table"><i class="fa fa-check"></i><b>5.2.1</b> Multiple types of units are in the same table</a></li>
<li class="chapter" data-level="5.2.2" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#one-unit-is-in-multiple-tables"><i class="fa fa-check"></i><b>5.2.2</b> One unit is in multiple tables</a></li>
<li class="chapter" data-level="5.2.3" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#left_join-and-right_join"><i class="fa fa-check"></i><b>5.2.3</b> <code>left_join()</code> and <code>right_join()</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#inner_join"><i class="fa fa-check"></i><b>5.2.4</b> <code>inner_join()</code></a></li>
<li class="chapter" data-level="5.2.5" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#full_join"><i class="fa fa-check"></i><b>5.2.5</b> <code>full_join()</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#semi_join"><i class="fa fa-check"></i><b>5.2.6</b> <code>semi_join()</code></a></li>
<li class="chapter" data-level="5.2.7" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#anti_join"><i class="fa fa-check"></i><b>5.2.7</b> <code>anti_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="manipulation-with-dplyr.html"><a href="manipulation-with-dplyr.html#further-links-3"><i class="fa fa-check"></i><b>5.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html"><i class="fa fa-check"></i><b>6</b> Factors and strings with <code>forcats</code> and <code>stringr</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#factors-with-forcats"><i class="fa fa-check"></i><b>6.1</b> Factors with <code>forcats</code></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#creating-a-factor"><i class="fa fa-check"></i><b>6.1.1</b> Creating a factor</a></li>
<li class="chapter" data-level="6.1.2" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#some-basic-operations"><i class="fa fa-check"></i><b>6.1.2</b> Some basic operations</a></li>
<li class="chapter" data-level="6.1.3" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#further-links-4"><i class="fa fa-check"></i><b>6.1.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#string-manipulation-with-stringr"><i class="fa fa-check"></i><b>6.2</b> String manipulation with <code>stringr</code></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#basic-functionalities"><i class="fa fa-check"></i><b>6.2.1</b> Basic functionalities</a></li>
<li class="chapter" data-level="6.2.2" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#regular-expressions"><i class="fa fa-check"></i><b>6.2.2</b> Regular expressions</a></li>
<li class="chapter" data-level="6.2.3" data-path="factors-and-strings-with-forcats-and-stringr.html"><a href="factors-and-strings-with-forcats-and-stringr.html#further-links-5"><i class="fa fa-check"></i><b>6.2.3</b> Further links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="visualizations-with-ggplot2.html"><a href="visualizations-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Visualizations with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="visualizations-with-ggplot2.html"><a href="visualizations-with-ggplot2.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1</b> The “layered grammar of graphics”</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="visualizations-with-ggplot2.html"><a href="visualizations-with-ggplot2.html#the-layers"><i class="fa fa-check"></i><b>7.1.1</b> The layers</a></li>
<li class="chapter" data-level="7.1.2" data-path="visualizations-with-ggplot2.html"><a href="visualizations-with-ggplot2.html#making-them-publishable"><i class="fa fa-check"></i><b>7.1.2</b> Making them “publishable”</a></li>
<li class="chapter" data-level="7.1.3" data-path="visualizations-with-ggplot2.html"><a href="visualizations-with-ggplot2.html#further-readings-1"><i class="fa fa-check"></i><b>7.1.3</b> Further readings</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="writing-academic-papers-with-rmarkdown.html"><a href="writing-academic-papers-with-rmarkdown.html"><i class="fa fa-check"></i><b>8</b> Writing academic papers with <code>RMarkdown</code></a></li>
<li class="chapter" data-level="9" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>9</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An(other) introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="factors-and-strings-with-forcats-and-stringr" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Factors and strings with <code>forcats</code> and <code>stringr</code></h1>
<p>preamble on working with categorical and text data</p>
<div id="factors-with-forcats" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Factors with <code>forcats</code></h2>
<p>Factors are used in R to represent categorical data. In the following, I will briefly introduce you to the <code>forcats</code> package (nice anagram, Hadley!). Factors are augmented vectors which build upon integers. If you want to learn more about them, consider reading <a href="https://peerj.com/preprints/3163/">this paper</a>.</p>
<div id="creating-a-factor" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Creating a factor</h3>
<p>You can create a factor in two manners.</p>
<ol style="list-style-type: decimal">
<li>Take a character vector and coerce it to a factor</li>
</ol>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb276-1" aria-hidden="true" tabindex="-1"></a>parties <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AfD&quot;</span>, <span class="st">&quot;CDU&quot;</span>, <span class="st">&quot;CSU&quot;</span>, <span class="st">&quot;FDP&quot;</span>, <span class="st">&quot;Greens&quot;</span>, <span class="st">&quot;Leftists&quot;</span>, <span class="st">&quot;SPD&quot;</span>)</span>
<span id="cb276-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb276-2" aria-hidden="true" tabindex="-1"></a>parties_fct <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(parties)</span>
<span id="cb276-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb276-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb276-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(parties_fct)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create it from scratch by providing levels and a vector respectively</li>
</ol>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb278-1" aria-hidden="true" tabindex="-1"></a>party_sample <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">sample</span>(parties, <span class="dv">49</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>), <span class="st">&quot;CUD&quot;</span>)</span>
<span id="cb278-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(party_sample, <span class="at">levels =</span> parties)</span></code></pre></div>
<pre><code>##  [1] FDP      Leftists Leftists AfD      CDU      CSU      Greens   CSU     
##  [9] CSU      AfD      FDP      AfD      AfD      Greens   CSU      CDU     
## [17] SPD      CDU      AfD      Leftists CSU      FDP      Leftists AfD     
## [25] CSU      SPD      Greens   FDP      SPD      CDU      Greens   SPD     
## [33] AfD      AfD      CDU      SPD      CSU      FDP      Greens   SPD     
## [41] Greens   CSU      Leftists AfD      CDU      Greens   Greens   FDP     
## [49] SPD      &lt;NA&gt;    
## Levels: AfD CDU CSU FDP Greens Leftists SPD</code></pre>
<p>If you want to access the levels, use <code>levels()</code></p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(parties_fct)</span></code></pre></div>
<pre><code>## [1] &quot;AfD&quot;      &quot;CDU&quot;      &quot;CSU&quot;      &quot;FDP&quot;      &quot;Greens&quot;   &quot;Leftists&quot; &quot;SPD&quot;</code></pre>
</div>
<div id="some-basic-operations" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Some basic operations</h3>
<p>I will have a further look into factors using data on the presidential elections in the U.S.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb282-1" aria-hidden="true" tabindex="-1"></a>election_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/pres16results.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb282-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb282-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb282-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   county = col_character(),
##   fips = col_character(),
##   cand = col_character(),
##   st = col_character(),
##   pct_report = col_double(),
##   votes = col_double(),
##   total_votes = col_double(),
##   pct = col_double(),
##   lead = col_character()
## )</code></pre>
<pre><code>## Rows: 18,007
## Columns: 9
## $ county      &lt;chr&gt; &quot;Los Angeles County&quot;, &quot;Los Angeles County&quot;, &quot;Los Angeles C…
## $ fips        &lt;chr&gt; &quot;6037&quot;, &quot;6037&quot;, &quot;6037&quot;, &quot;6037&quot;, &quot;6037&quot;, &quot;17031&quot;, &quot;17031&quot;, …
## $ cand        &lt;chr&gt; &quot;Hillary Clinton&quot;, &quot;Donald Trump&quot;, &quot;Gary Johnson&quot;, &quot;Jill S…
## $ st          &lt;chr&gt; &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;IL&quot;, &quot;IL&quot;, &quot;IL&quot;, &quot;IL&quot;, &quot;TX&quot;…
## $ pct_report  &lt;dbl&gt; 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9746, 0.9746, 0.…
## $ votes       &lt;dbl&gt; 1654626, 542591, 56905, 46682, 13471, 1528582, 440213, 559…
## $ total_votes &lt;dbl&gt; 2314275, 2314275, 2314275, 2314275, 2314275, 2055215, 2055…
## $ pct         &lt;dbl&gt; 0.714965162, 0.234453987, 0.024588694, 0.020171328, 0.0058…
## $ lead        &lt;chr&gt; &quot;Hillary Clinton&quot;, &quot;Hillary Clinton&quot;, &quot;Hillary Clinton&quot;, &quot;…</code></pre>
<p>Which variables should be converted to factors? – <code>county</code>, <code>cand</code>, <code>st</code>, <code>lead</code>.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb285-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="ot">&lt;-</span> election_data <span class="sc">%&gt;%</span> </span>
<span id="cb285-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb285-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">county =</span> <span class="fu">as_factor</span>(county),</span>
<span id="cb285-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb285-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">candidate =</span> <span class="fu">as_factor</span>(cand),</span>
<span id="cb285-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb285-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">state =</span> <span class="fu">as_factor</span>(st),</span>
<span id="cb285-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb285-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">lead =</span> <span class="fu">as_factor</span>(lead)) <span class="sc">%&gt;%</span> </span>
<span id="cb285-6"><a href="factors-and-strings-with-forcats-and-stringr.html#cb285-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(county, candidate, state, pct_report<span class="sc">:</span>pct, lead)</span></code></pre></div>
<div id="reordering-factors" class="section level4" number="6.1.2.1">
<h4><span class="header-section-number">6.1.2.1</span> Reordering factors</h4>
<p>Sometimes you want to reorder factors – for instance, when you want to create plots. (Note: you will learn more on plots in the next session on data visualization)</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb286-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span> </span>
<span id="cb286-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb286-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb286-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb286-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum_votes =</span> <span class="fu">sum</span>(votes)) <span class="sc">%&gt;%</span> </span>
<span id="cb286-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb286-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sum_votes, <span class="at">y =</span> state)) <span class="sc">+</span></span>
<span id="cb286-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb286-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="introduction-to-r_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<p>Two orders would make sense: alphabetical and according to their number of votes. <code>fct_reorder()</code> takes another variable and orders the factor according to it.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb287-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span></span>
<span id="cb287-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb287-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb287-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb287-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum_votes =</span> <span class="fu">sum</span>(votes)) <span class="sc">%&gt;%</span> </span>
<span id="cb287-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb287-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">fct_reorder</span>(state, sum_votes)) <span class="sc">%&gt;%</span> </span>
<span id="cb287-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb287-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sum_votes, <span class="at">y =</span> state)) <span class="sc">+</span></span>
<span id="cb287-6"><a href="factors-and-strings-with-forcats-and-stringr.html#cb287-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="introduction-to-r_files/figure-html/unnamed-chunk-108-1.png" width="672" /></p>
<p>If you want to have it ordered the other way round, multiply the ordering variable with -1:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb288-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span> </span>
<span id="cb288-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb288-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb288-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb288-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum_votes =</span> <span class="fu">sum</span>(votes)) <span class="sc">%&gt;%</span> </span>
<span id="cb288-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb288-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">fct_reorder</span>(state, sum_votes<span class="sc">*</span>(<span class="sc">-</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb288-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb288-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sum_votes, <span class="at">y =</span> state)) <span class="sc">+</span></span>
<span id="cb288-6"><a href="factors-and-strings-with-forcats-and-stringr.html#cb288-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="introduction-to-r_files/figure-html/unnamed-chunk-109-1.png" width="672" /></p>
<p>You could also achieve this by calling <code>fct_rev()</code> afterwards: it reverses the order of the factor.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span> </span>
<span id="cb289-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb289-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum_votes =</span> <span class="fu">sum</span>(votes)) <span class="sc">%&gt;%</span> </span>
<span id="cb289-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">fct_reorder</span>(state, sum_votes),</span>
<span id="cb289-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">state =</span> <span class="fu">fct_rev</span>(state)) <span class="sc">%&gt;%</span> </span>
<span id="cb289-6"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sum_votes, <span class="at">y =</span> state)) <span class="sc">+</span></span>
<span id="cb289-7"><a href="factors-and-strings-with-forcats-and-stringr.html#cb289-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="introduction-to-r_files/figure-html/unnamed-chunk-110-1.png" width="672" /></p>
<p>If you want to do bar plots, which you can use to depict the frequency of a value, you can order them according to the frequency they appear in using <code>fct_infreq()</code>:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb290-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span> </span>
<span id="cb290-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb290-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lead =</span> lead <span class="sc">%&gt;%</span> <span class="fu">fct_infreq</span>() <span class="sc">%&gt;%</span> <span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb290-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb290-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> lead)) <span class="sc">+</span></span>
<span id="cb290-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb290-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="introduction-to-r_files/figure-html/unnamed-chunk-111-1.png" width="672" /></p>
</div>
<div id="modifying-levels" class="section level4" number="6.1.2.2">
<h4><span class="header-section-number">6.1.2.2</span> Modifying levels</h4>
<p>Remember the first factor? You need to put some graphs together and decide that you would rather like to use the original German names for the parties. Go for <code>fct_recode()</code>.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb291-1" aria-hidden="true" tabindex="-1"></a>parties_fct_ger <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(parties_fct,</span>
<span id="cb291-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb291-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Buendnis90/Die Gruenen&quot;</span> <span class="ot">=</span> <span class="st">&quot;Greens&quot;</span>, </span>
<span id="cb291-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb291-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Die Linke&quot;</span> <span class="ot">=</span> <span class="st">&quot;Leftists&quot;</span></span>
<span id="cb291-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb291-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Damn, now the levels are not in alphabetical order anymore.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(parties_fct_ger)</span></code></pre></div>
<pre><code>## [1] &quot;AfD&quot;                    &quot;CDU&quot;                    &quot;CSU&quot;                   
## [4] &quot;FDP&quot;                    &quot;Buendnis90/Die Gruenen&quot; &quot;Die Linke&quot;             
## [7] &quot;SPD&quot;</code></pre>
<p>In this case, this can be done pretty quickly. Just copy the levels and manipulate the order:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-1" aria-hidden="true" tabindex="-1"></a>parties_fct_ger_alphabetical <span class="ot">&lt;-</span> <span class="fu">fct_relevel</span>(parties_fct_ger, </span>
<span id="cb294-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-2" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">c</span>(<span class="st">&quot;AfD&quot;</span>, </span>
<span id="cb294-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-3" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;Buendnis90/Die Gruenen&quot;</span>, </span>
<span id="cb294-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;CDU&quot;</span>, </span>
<span id="cb294-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-5" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;CSU&quot;</span>,</span>
<span id="cb294-6"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-6" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;Die Linke&quot;</span>,</span>
<span id="cb294-7"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-7" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;FDP&quot;</span>,</span>
<span id="cb294-8"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-8" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;SPD&quot;</span>))</span>
<span id="cb294-9"><a href="factors-and-strings-with-forcats-and-stringr.html#cb294-9" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(parties_fct_ger_alphabetical)</span></code></pre></div>
<pre><code>## [1] &quot;AfD&quot;                    &quot;Buendnis90/Die Gruenen&quot; &quot;CDU&quot;                   
## [4] &quot;CSU&quot;                    &quot;Die Linke&quot;              &quot;FDP&quot;                   
## [7] &quot;SPD&quot;</code></pre>
<p>Now you need to write something for someone who is not particular familiar with the political landscape in Germany and rather wants “left,” “center,” and “right” instead of the party’s names. Give <code>fct_collapse()</code> a shot – and feel free to change it if you disagree with my classification.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb296-1" aria-hidden="true" tabindex="-1"></a>lcr_ger <span class="ot">&lt;-</span> <span class="fu">fct_collapse</span>(parties_fct,</span>
<span id="cb296-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb296-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">left =</span> <span class="fu">c</span>(<span class="st">&quot;Leftists&quot;</span>, <span class="st">&quot;Greens&quot;</span>, <span class="st">&quot;SPD&quot;</span>),</span>
<span id="cb296-3"><a href="factors-and-strings-with-forcats-and-stringr.html#cb296-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">centre =</span> <span class="fu">c</span>(<span class="st">&quot;CDU&quot;</span>, <span class="st">&quot;CSU&quot;</span>, <span class="st">&quot;FDP&quot;</span>),</span>
<span id="cb296-4"><a href="factors-and-strings-with-forcats-and-stringr.html#cb296-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">right =</span> <span class="fu">c</span>(<span class="st">&quot;AfD&quot;</span>)</span>
<span id="cb296-5"><a href="factors-and-strings-with-forcats-and-stringr.html#cb296-5" aria-hidden="true" tabindex="-1"></a>                        )</span></code></pre></div>
<p>Another thing you could do – and this is handy for the election data set – is collapsing things together according to their frequency of appearance. In the case of the election data set, this might be handy to lump together the candidates into three groups: Donald Trump, Hillary Clinton, and other.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb297-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span> </span>
<span id="cb297-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb297-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">candidate =</span> <span class="fu">fct_lump</span>(candidate, <span class="at">n =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## # A tibble: 18,007 x 8
##    county      candidate    state pct_report  votes total_votes     pct lead    
##    &lt;fct&gt;       &lt;fct&gt;        &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;   
##  1 Los Angele… Hillary Cli… CA         1     1.65e6     2314275 0.715   Hillary…
##  2 Los Angele… Donald Trump CA         1     5.43e5     2314275 0.234   Hillary…
##  3 Los Angele… Gary Johnson CA         1     5.69e4     2314275 0.0246  Hillary…
##  4 Los Angele… Other        CA         1     4.67e4     2314275 0.0202  Hillary…
##  5 Los Angele… Other        CA         1     1.35e4     2314275 0.00582 Hillary…
##  6 Cook County Hillary Cli… IL         0.975 1.53e6     2055215 0.744   Hillary…
##  7 Cook County Donald Trump IL         0.975 4.40e5     2055215 0.214   Hillary…
##  8 Cook County Gary Johnson IL         0.975 5.59e4     2055215 0.0272  Hillary…
##  9 Cook County Other        IL         0.975 3.05e4     2055215 0.0149  Hillary…
## 10 Harris Cou… Hillary Cli… TX         1     7.06e5     1302887 0.542   Hillary…
## # … with 17,997 more rows</code></pre>
<p>The problem here is that Gary Johnson appears as often as the two other candidates (have you ever heard of him?). Hence, <code>fct_lump()</code> cannot decide which levels to lump together. However, it has saved me a couple lines of code:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="factors-and-strings-with-forcats-and-stringr.html#cb299-1" aria-hidden="true" tabindex="-1"></a>election_data_w_fct <span class="sc">%&gt;%</span> </span>
<span id="cb299-2"><a href="factors-and-strings-with-forcats-and-stringr.html#cb299-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">candidate =</span> <span class="fu">fct_lump</span>(candidate, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">fct_recode</span>(<span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gary Johnson&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 18,007 x 8
##    county      candidate    state pct_report  votes total_votes     pct lead    
##    &lt;fct&gt;       &lt;fct&gt;        &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;   
##  1 Los Angele… Hillary Cli… CA         1     1.65e6     2314275 0.715   Hillary…
##  2 Los Angele… Donald Trump CA         1     5.43e5     2314275 0.234   Hillary…
##  3 Los Angele… Other        CA         1     5.69e4     2314275 0.0246  Hillary…
##  4 Los Angele… Other        CA         1     4.67e4     2314275 0.0202  Hillary…
##  5 Los Angele… Other        CA         1     1.35e4     2314275 0.00582 Hillary…
##  6 Cook County Hillary Cli… IL         0.975 1.53e6     2055215 0.744   Hillary…
##  7 Cook County Donald Trump IL         0.975 4.40e5     2055215 0.214   Hillary…
##  8 Cook County Other        IL         0.975 5.59e4     2055215 0.0272  Hillary…
##  9 Cook County Other        IL         0.975 3.05e4     2055215 0.0149  Hillary…
## 10 Harris Cou… Hillary Cli… TX         1     7.06e5     1302887 0.542   Hillary…
## # … with 17,997 more rows</code></pre>
</div>
</div>
<div id="further-links-4" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Further links</h3>
<ul>
<li>The chapter in <a href="https://r4ds.had.co.nz/factors.html">R4DS</a></li>
<li>If you want to learn more about factors, consider reading <a href="https://peerj.com/preprints/3163/">this paper</a></li>
<li>Another <a href="https://www.r-bloggers.com/2020/06/working-with-factors-in-r-tutorial-forcats-package/">tutorial</a></li>
</ul>
</div>
</div>
<div id="string-manipulation-with-stringr" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> String manipulation with <code>stringr</code></h2>
<div id="basic-functionalities" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Basic functionalities</h3>
</div>
<div id="regular-expressions" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Regular expressions</h3>
</div>
<div id="further-links-5" class="section level3" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Further links</h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="manipulation-with-dplyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualizations-with-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction-to-r.pdf", "introduction-to-r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
