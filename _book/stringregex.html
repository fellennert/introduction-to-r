<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 String manipulation with stringr and regular expressions | An(other) introduction to R</title>
  <meta name="description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 String manipulation with stringr and regular expressions | An(other) introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 String manipulation with stringr and regular expressions | An(other) introduction to R" />
  
  <meta name="twitter:description" content="This is a gentle introduction to R and the basic usage of some tidyverse packages (dplyr, tidyr, ggplot2, forcats, stringr) for data manipulation and visualization." />
  

<meta name="author" content="Felix Lennert" />


<meta name="date" content="2021-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="wrangling.html"/>
<link rel="next" href="workwithfactors.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.4/css/vembedr.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prologue</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i><b>1.1</b> Course outline</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i><b>1.2</b> Why R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i><b>1.2.1</b> Reproducibility</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#its-free-and-community-based"><i class="fa fa-check"></i><b>1.2.2</b> It’s free and community-based</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#jobs"><i class="fa fa-check"></i><b>1.2.3</b> Jobs</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#further-links"><i class="fa fa-check"></i><b>1.3</b> Further links</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#last-but-not-least"><i class="fa fa-check"></i><b>1.4</b> Last but not least</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introrstudio.html"><a href="introrstudio.html"><i class="fa fa-check"></i><b>2</b> Getting started with RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introrstudio.html"><a href="introrstudio.html#installing-r"><i class="fa fa-check"></i><b>2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introrstudio.html"><a href="introrstudio.html#installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introrstudio.html"><a href="introrstudio.html#setting-up-rstudio"><i class="fa fa-check"></i><b>2.3</b> Setting up RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introrstudio.html"><a href="introrstudio.html#some-remarks-on-your-daily-workflow"><i class="fa fa-check"></i><b>2.4</b> Some remarks on your daily workflow</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introrstudio.html"><a href="introrstudio.html#rstudio-projects"><i class="fa fa-check"></i><b>2.4.1</b> RStudio Projects</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introrstudio.html"><a href="introrstudio.html#r-scripts-and-rmarkdown"><i class="fa fa-check"></i><b>2.5</b> R scripts and RMarkdown</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introrstudio.html"><a href="introrstudio.html#r-scripts"><i class="fa fa-check"></i><b>2.5.1</b> R scripts</a></li>
<li class="chapter" data-level="2.5.2" data-path="introrstudio.html"><a href="introrstudio.html#rmarkdown"><i class="fa fa-check"></i><b>2.5.2</b> RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introrstudio.html"><a href="introrstudio.html#further-links-1"><i class="fa fa-check"></i><b>2.6</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intror.html"><a href="intror.html"><i class="fa fa-check"></i><b>3</b> Intro to R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intror.html"><a href="intror.html#installing-packages"><i class="fa fa-check"></i><b>3.1</b> Installing packages</a></li>
<li class="chapter" data-level="3.2" data-path="intror.html"><a href="intror.html#basic-arithmetic-operations"><i class="fa fa-check"></i><b>3.2</b> Basic arithmetic operations</a></li>
<li class="chapter" data-level="3.3" data-path="intror.html"><a href="intror.html#vectors"><i class="fa fa-check"></i><b>3.3</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intror.html"><a href="intror.html#atomic-vectors"><i class="fa fa-check"></i><b>3.3.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="3.3.2" data-path="intror.html"><a href="intror.html#working-with-atomic-vectors"><i class="fa fa-check"></i><b>3.3.2</b> Working with atomic vectors</a></li>
<li class="chapter" data-level="3.3.3" data-path="intror.html"><a href="intror.html#lists"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="intror.html"><a href="intror.html#augmented-vectors"><i class="fa fa-check"></i><b>3.3.4</b> Augmented vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intror.html"><a href="intror.html#further-links-2"><i class="fa fa-check"></i><b>3.4</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workingwithdata.html"><a href="workingwithdata.html"><i class="fa fa-check"></i><b>4</b> Working with data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workingwithdata.html"><a href="workingwithdata.html#reading-in-data-sets"><i class="fa fa-check"></i><b>4.1</b> Reading in data sets</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="workingwithdata.html"><a href="workingwithdata.html#the-working-directory-in-r"><i class="fa fa-check"></i><b>4.1.1</b> The working directory in R</a></li>
<li class="chapter" data-level="4.1.2" data-path="workingwithdata.html"><a href="workingwithdata.html#readrs-general-functions"><i class="fa fa-check"></i><b>4.1.2</b> <code>readr</code>’s general functions…</a></li>
<li class="chapter" data-level="4.1.3" data-path="workingwithdata.html"><a href="workingwithdata.html#and-their-additional-arguments"><i class="fa fa-check"></i><b>4.1.3</b> …and their additional arguments</a></li>
<li class="chapter" data-level="4.1.4" data-path="workingwithdata.html"><a href="workingwithdata.html#column-types"><i class="fa fa-check"></i><b>4.1.4</b> Column types</a></li>
<li class="chapter" data-level="4.1.5" data-path="workingwithdata.html"><a href="workingwithdata.html#rds-and-.rdatafiles"><i class="fa fa-check"></i><b>4.1.5</b> <code>.rds</code> and <code>.RData</code>files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="workingwithdata.html"><a href="workingwithdata.html#write-data"><i class="fa fa-check"></i><b>4.2</b> Write data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="workingwithdata.html"><a href="workingwithdata.html#write_csv"><i class="fa fa-check"></i><b>4.2.1</b> <code>write_csv()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="workingwithdata.html"><a href="workingwithdata.html#write_rds"><i class="fa fa-check"></i><b>4.2.2</b> <code>write_rds()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="workingwithdata.html"><a href="workingwithdata.html#save"><i class="fa fa-check"></i><b>4.2.3</b> <code>save()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="workingwithdata.html"><a href="workingwithdata.html#alternative-ways-to-read-in-and-write-data"><i class="fa fa-check"></i><b>4.3</b> Alternative ways to read in and write data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="workingwithdata.html"><a href="workingwithdata.html#haven"><i class="fa fa-check"></i><b>4.3.1</b> <code>haven</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="workingwithdata.html"><a href="workingwithdata.html#readxl"><i class="fa fa-check"></i><b>4.3.2</b> <code>readxl</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="workingwithdata.html"><a href="workingwithdata.html#vroom"><i class="fa fa-check"></i><b>4.3.3</b> <code>vroom</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="workingwithdata.html"><a href="workingwithdata.html#further-readings"><i class="fa fa-check"></i><b>4.3.4</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="workingwithdata.html"><a href="workingwithdata.html#tidy-data"><i class="fa fa-check"></i><b>4.4</b> Tidy data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="workingwithdata.html"><a href="workingwithdata.html#in-theory"><i class="fa fa-check"></i><b>4.4.1</b> In theory</a></li>
<li class="chapter" data-level="4.4.2" data-path="workingwithdata.html"><a href="workingwithdata.html#in-practice"><i class="fa fa-check"></i><b>4.4.2</b> In practice</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="workingwithdata.html"><a href="workingwithdata.html#further-links-3"><i class="fa fa-check"></i><b>4.5</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>5</b> Manipulation with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="wrangling.html"><a href="wrangling.html#working-with-the-main-verbs"><i class="fa fa-check"></i><b>5.1</b> Working with the main “verbs”</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="wrangling.html"><a href="wrangling.html#select"><i class="fa fa-check"></i><b>5.1.1</b> <code>select()</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="wrangling.html"><a href="wrangling.html#filter"><i class="fa fa-check"></i><b>5.1.2</b> <code>filter()</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="wrangling.html"><a href="wrangling.html#mutate"><i class="fa fa-check"></i><b>5.1.3</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="wrangling.html"><a href="wrangling.html#summarize-and-group_by"><i class="fa fa-check"></i><b>5.1.4</b> <code>summarize()</code> and <code>group_by</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="wrangling.html"><a href="wrangling.html#arrange"><i class="fa fa-check"></i><b>5.1.5</b> <code>arrange()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="wrangling.html"><a href="wrangling.html#introducing-joins"><i class="fa fa-check"></i><b>5.2</b> Introducing <code>joins</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="wrangling.html"><a href="wrangling.html#multiple-types-of-units-are-in-the-same-table"><i class="fa fa-check"></i><b>5.2.1</b> Multiple types of units are in the same table</a></li>
<li class="chapter" data-level="5.2.2" data-path="wrangling.html"><a href="wrangling.html#one-unit-is-in-multiple-tables"><i class="fa fa-check"></i><b>5.2.2</b> One unit is in multiple tables</a></li>
<li class="chapter" data-level="5.2.3" data-path="wrangling.html"><a href="wrangling.html#left_join-and-right_join"><i class="fa fa-check"></i><b>5.2.3</b> <code>left_join()</code> and <code>right_join()</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="wrangling.html"><a href="wrangling.html#inner_join"><i class="fa fa-check"></i><b>5.2.4</b> <code>inner_join()</code></a></li>
<li class="chapter" data-level="5.2.5" data-path="wrangling.html"><a href="wrangling.html#full_join"><i class="fa fa-check"></i><b>5.2.5</b> <code>full_join()</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="wrangling.html"><a href="wrangling.html#semi_join"><i class="fa fa-check"></i><b>5.2.6</b> <code>semi_join()</code></a></li>
<li class="chapter" data-level="5.2.7" data-path="wrangling.html"><a href="wrangling.html#anti_join"><i class="fa fa-check"></i><b>5.2.7</b> <code>anti_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="wrangling.html"><a href="wrangling.html#further-links-4"><i class="fa fa-check"></i><b>5.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stringregex.html"><a href="stringregex.html"><i class="fa fa-check"></i><b>6</b> String manipulation with <code>stringr</code> and <code>regular expressions</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="stringregex.html"><a href="stringregex.html#basic-manipulations"><i class="fa fa-check"></i><b>6.1</b> Basic manipulations</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="stringregex.html"><a href="stringregex.html#changing-the-case-of-the-words"><i class="fa fa-check"></i><b>6.1.1</b> Changing the case of the words</a></li>
<li class="chapter" data-level="6.1.2" data-path="stringregex.html"><a href="stringregex.html#deternining-a-strings-length"><i class="fa fa-check"></i><b>6.1.2</b> Deternining a string’s length</a></li>
<li class="chapter" data-level="6.1.3" data-path="stringregex.html"><a href="stringregex.html#extracting-particular-characters"><i class="fa fa-check"></i><b>6.1.3</b> Extracting particular characters</a></li>
<li class="chapter" data-level="6.1.4" data-path="stringregex.html"><a href="stringregex.html#concatenating-strings"><i class="fa fa-check"></i><b>6.1.4</b> Concatenating strings</a></li>
<li class="chapter" data-level="6.1.5" data-path="stringregex.html"><a href="stringregex.html#repetition"><i class="fa fa-check"></i><b>6.1.5</b> Repetition</a></li>
<li class="chapter" data-level="6.1.6" data-path="stringregex.html"><a href="stringregex.html#removing-unnecessary-whitespaces"><i class="fa fa-check"></i><b>6.1.6</b> Removing unnecessary whitespaces</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="stringregex.html"><a href="stringregex.html#regular-expressions"><i class="fa fa-check"></i><b>6.2</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="stringregex.html"><a href="stringregex.html#literal-characters"><i class="fa fa-check"></i><b>6.2.1</b> Literal characters</a></li>
<li class="chapter" data-level="6.2.2" data-path="stringregex.html"><a href="stringregex.html#metacharacters"><i class="fa fa-check"></i><b>6.2.2</b> Metacharacters</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="stringregex.html"><a href="stringregex.html#more-advanced-string-manipulation"><i class="fa fa-check"></i><b>6.3</b> More advanced string manipulation</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="stringregex.html"><a href="stringregex.html#detect-matches"><i class="fa fa-check"></i><b>6.3.1</b> Detect matches</a></li>
<li class="chapter" data-level="6.3.2" data-path="stringregex.html"><a href="stringregex.html#mutating-strings"><i class="fa fa-check"></i><b>6.3.2</b> Mutating strings</a></li>
<li class="chapter" data-level="6.3.3" data-path="stringregex.html"><a href="stringregex.html#extracting-text"><i class="fa fa-check"></i><b>6.3.3</b> Extracting text</a></li>
<li class="chapter" data-level="6.3.4" data-path="stringregex.html"><a href="stringregex.html#split-vectors"><i class="fa fa-check"></i><b>6.3.4</b> Split vectors</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="stringregex.html"><a href="stringregex.html#further-links-5"><i class="fa fa-check"></i><b>6.4</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="workwithfactors.html"><a href="workwithfactors.html"><i class="fa fa-check"></i><b>7</b> Factors with <code>forcats</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="workwithfactors.html"><a href="workwithfactors.html#creating-a-factor"><i class="fa fa-check"></i><b>7.1</b> Creating a factor</a></li>
<li class="chapter" data-level="7.2" data-path="workwithfactors.html"><a href="workwithfactors.html#some-basic-operations"><i class="fa fa-check"></i><b>7.2</b> Some basic operations</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="workwithfactors.html"><a href="workwithfactors.html#reordering-factors"><i class="fa fa-check"></i><b>7.2.1</b> Reordering factors</a></li>
<li class="chapter" data-level="7.2.2" data-path="workwithfactors.html"><a href="workwithfactors.html#modifying-levels"><i class="fa fa-check"></i><b>7.2.2</b> Modifying levels</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="workwithfactors.html"><a href="workwithfactors.html#further-links-6"><i class="fa fa-check"></i><b>7.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="descriptives.html"><a href="descriptives.html"><i class="fa fa-check"></i><b>8</b> Describing data sets</a>
<ul>
<li class="chapter" data-level="8.1" data-path="descriptives.html"><a href="descriptives.html#basic-descriptives"><i class="fa fa-check"></i><b>8.1</b> Basic descriptives</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="descriptives.html"><a href="descriptives.html#grouped-descriptives"><i class="fa fa-check"></i><b>8.1.1</b> Grouped descriptives</a></li>
<li class="chapter" data-level="8.1.2" data-path="descriptives.html"><a href="descriptives.html#modifying-the-skim-output"><i class="fa fa-check"></i><b>8.1.2</b> Modifying the <code>skim()</code> output</a></li>
<li class="chapter" data-level="8.1.3" data-path="descriptives.html"><a href="descriptives.html#further-descriptives"><i class="fa fa-check"></i><b>8.1.3</b> Further descriptives</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="descriptives.html"><a href="descriptives.html#communicating-results"><i class="fa fa-check"></i><b>8.2</b> Communicating results</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="descriptives.html"><a href="descriptives.html#tables-with-knitrkable-and-kableextra"><i class="fa fa-check"></i><b>8.2.1</b> Tables with <code>knitr::kable()</code> and <code>kableExtra</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="descriptives.html"><a href="descriptives.html#use-case-reporting-skimr-results"><i class="fa fa-check"></i><b>8.2.2</b> Use case: reporting <code>skimr</code> results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="descriptives.html"><a href="descriptives.html#further-links-7"><i class="fa fa-check"></i><b>8.3</b> Further links</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>9</b> Visualizations with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="visualization.html"><a href="visualization.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>9.1</b> The “layered grammar of graphics”</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="visualization.html"><a href="visualization.html#the-layers"><i class="fa fa-check"></i><b>9.1.1</b> The layers</a></li>
<li class="chapter" data-level="9.1.2" data-path="visualization.html"><a href="visualization.html#making-them-publishable"><i class="fa fa-check"></i><b>9.1.2</b> Making them “publishable”</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="visualization.html"><a href="visualization.html#further-readings-1"><i class="fa fa-check"></i><b>9.2</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>10</b> Writing academic papers with <code>RMarkdown</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="markdown.html"><a href="markdown.html#introduction"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="markdown.html"><a href="markdown.html#further-resources"><i class="fa fa-check"></i><b>10.2</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="functionalprogramming.html"><a href="functionalprogramming.html"><i class="fa fa-check"></i><b>11</b> Functional programming and iterations</a>
<ul>
<li class="chapter" data-level="11.1" data-path="functionalprogramming.html"><a href="functionalprogramming.html#flow-control"><i class="fa fa-check"></i><b>11.1</b> Flow control</a></li>
<li class="chapter" data-level="11.2" data-path="functionalprogramming.html"><a href="functionalprogramming.html#functions"><i class="fa fa-check"></i><b>11.2</b> Functions</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="functionalprogramming.html"><a href="functionalprogramming.html#writing-your-own-functions"><i class="fa fa-check"></i><b>11.2.1</b> Writing your own functions</a></li>
<li class="chapter" data-level="11.2.2" data-path="functionalprogramming.html"><a href="functionalprogramming.html#an-example-roulette"><i class="fa fa-check"></i><b>11.2.2</b> An example: Roulette</a></li>
<li class="chapter" data-level="11.2.3" data-path="functionalprogramming.html"><a href="functionalprogramming.html#functional-programming-with-tidyverse-functions"><i class="fa fa-check"></i><b>11.2.3</b> Functional programming with <code>tidyverse</code> functions</a></li>
<li class="chapter" data-level="11.2.4" data-path="functionalprogramming.html"><a href="functionalprogramming.html#further-readings-2"><i class="fa fa-check"></i><b>11.2.4</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="functionalprogramming.html"><a href="functionalprogramming.html#iteration"><i class="fa fa-check"></i><b>11.3</b> Iteration</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="functionalprogramming.html"><a href="functionalprogramming.html#for-loops"><i class="fa fa-check"></i><b>11.3.1</b> <code>for</code> loops</a></li>
<li class="chapter" data-level="11.3.2" data-path="functionalprogramming.html"><a href="functionalprogramming.html#purrrmap"><i class="fa fa-check"></i><b>11.3.2</b> purrr::map()</a></li>
<li class="chapter" data-level="11.3.3" data-path="functionalprogramming.html"><a href="functionalprogramming.html#further-links-8"><i class="fa fa-check"></i><b>11.3.3</b> Further links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="chapter" data-level="13" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>13</b> Exercises</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exercises.html"><a href="exercises.html#chapter-2"><i class="fa fa-check"></i><b>13.1</b> Chapter 2</a></li>
<li class="chapter" data-level="13.2" data-path="exercises.html"><a href="exercises.html#chapter-3"><i class="fa fa-check"></i><b>13.2</b> Chapter 3</a></li>
<li class="chapter" data-level="13.3" data-path="exercises.html"><a href="exercises.html#chapter-4"><i class="fa fa-check"></i><b>13.3</b> Chapter 4</a></li>
<li class="chapter" data-level="13.4" data-path="exercises.html"><a href="exercises.html#chapter-5"><i class="fa fa-check"></i><b>13.4</b> Chapter 5</a></li>
<li class="chapter" data-level="13.5" data-path="exercises.html"><a href="exercises.html#chapter-6"><i class="fa fa-check"></i><b>13.5</b> Chapter 6</a></li>
<li class="chapter" data-level="13.6" data-path="exercises.html"><a href="exercises.html#chapter-7"><i class="fa fa-check"></i><b>13.6</b> Chapter 7</a></li>
<li class="chapter" data-level="13.7" data-path="exercises.html"><a href="exercises.html#chapter-8"><i class="fa fa-check"></i><b>13.7</b> Chapter 8</a></li>
<li class="chapter" data-level="13.8" data-path="exercises.html"><a href="exercises.html#chapter-9"><i class="fa fa-check"></i><b>13.8</b> Chapter 9</a></li>
<li class="chapter" data-level="13.9" data-path="exercises.html"><a href="exercises.html#chapter-10"><i class="fa fa-check"></i><b>13.9</b> Chapter 10</a></li>
<li class="chapter" data-level="13.10" data-path="exercises.html"><a href="exercises.html#chapter-11"><i class="fa fa-check"></i><b>13.10</b> Chapter 11</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="exercises-functions.html"><a href="exercises-functions.html"><i class="fa fa-check"></i><b>14</b> Exercises functions</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An(other) introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stringregex" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> String manipulation with <code>stringr</code> and <code>regular expressions</code></h1>
<p>When analyzing data, a significant number of variables will be in some sort of text format. When you want to manipulate those variables, an easy approach would be exporting the data to MS Excel and then just perform those manipulations by hand. This is very time-consuming, though, and, hence, I rather recommend the R way, which scales well and works fast for data sets of varying sizes.</p>
<p>Quick reminder: a string is an element of a character vector and can be created by simply wrapping some text in backticks:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="stringregex.html#cb280-1" aria-hidden="true" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">&quot;Hi, how are you doing?&quot;</span></span>
<span id="cb280-2"><a href="stringregex.html#cb280-2" aria-hidden="true" tabindex="-1"></a>vector_of_strings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hi, how are you doing?&quot;</span>, <span class="st">&quot;I&#39;m doing well, HBY?&quot;</span>, <span class="st">&quot;Me too, thanks for asking.&quot;</span>)</span></code></pre></div>
<p>(Question: how would you go about quotes in strings?)</p>
<p>The <code>stringr</code> package contains a multitude of commands (49 in total) which can be used to achieve a couple of things: manipulating character vectors; operations which are sensitive to different locales; matching patterns. Basically, those goals can also be achieved with base R functions, but <code>stringr</code>’s advantage is its consistency. The makers of <code>stringr</code> describe it as</p>
<blockquote>
<p>A consistent, simple and easy to use set of wrappers around the fantastic ‘stringi’ package. All function and argument names (and positions) are consistent, all functions deal with “NA”’s and zero length vectors in the same way, and the output from one function is easy to feed into the input of another.</p>
</blockquote>
<p>Every <code>stringr</code> function starts with <code>str_</code> – which facilitates finding the proper command: just type <code>str_</code> and RStudio’s auto-suggest function should take care of the rest (if it doesn’t pop up by itself, you can trigger it by hitting the tab-key). Also, they take a vector of strings as their first argument, which facilitates using them in a <code>%&gt;%</code>-pipeline and adding them to a <code>mutate()</code>-call.</p>
<p>One important component of <code>stringr</code> functions is regular expressions which will be introduced later as well.</p>
<div id="basic-manipulations" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Basic manipulations</h2>
<p>In the following, I will introduce you to a number of different operations that can be performed on strings.</p>
<div id="changing-the-case-of-the-words" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Changing the case of the words</h3>
<p>A basic operation is changing words’ case.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="stringregex.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(vector_of_strings)</span></code></pre></div>
<pre><code>## [1] &quot;hi, how are you doing?&quot;     &quot;i&#39;m doing well, hby?&quot;      
## [3] &quot;me too, thanks for asking.&quot;</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="stringregex.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(vector_of_strings)</span></code></pre></div>
<pre><code>## [1] &quot;HI, HOW ARE YOU DOING?&quot;     &quot;I&#39;M DOING WELL, HBY?&quot;      
## [3] &quot;ME TOO, THANKS FOR ASKING.&quot;</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="stringregex.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(vector_of_strings)</span></code></pre></div>
<pre><code>## [1] &quot;Hi, How Are You Doing?&quot;     &quot;I&#39;m Doing Well, Hby?&quot;      
## [3] &quot;Me Too, Thanks For Asking.&quot;</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="stringregex.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_sentence</span>(vector_of_strings)</span></code></pre></div>
<pre><code>## [1] &quot;Hi, how are you doing?&quot;     &quot;I&#39;m doing well, hby?&quot;      
## [3] &quot;Me too, thanks for asking.&quot;</code></pre>
</div>
<div id="deternining-a-strings-length" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Deternining a string’s length</h3>
<p>Determining the string’s number of characters goes as follows:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="stringregex.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(vector_of_strings)</span></code></pre></div>
<pre><code>## [1] 22 20 26</code></pre>
</div>
<div id="extracting-particular-characters" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Extracting particular characters</h3>
<p>Characters can be extracted (by position) using <code>str_sub</code></p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="stringregex.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(vector_of_strings, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">5</span>) <span class="co"># extracting first to fifth character</span></span></code></pre></div>
<pre><code>## [1] &quot;Hi, h&quot; &quot;I&#39;m d&quot; &quot;Me to&quot;</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="stringregex.html#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(vector_of_strings, <span class="at">start =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="co"># extracting fifth-to-last to last character</span></span></code></pre></div>
<pre><code>## [1] &quot;oing?&quot; &quot; HBY?&quot; &quot;king.&quot;</code></pre>
<p>You can also use <code>str_sub()</code> to replace strings. E.g., to replace the last character by a full stop, you can do the following:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="stringregex.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(vector_of_strings, <span class="at">start =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="st">&quot;.&quot;</span></span>
<span id="cb295-2"><a href="stringregex.html#cb295-2" aria-hidden="true" tabindex="-1"></a>vector_of_strings</span></code></pre></div>
<pre><code>## [1] &quot;Hi, how are you doing.&quot;     &quot;I&#39;m doing well, HBY.&quot;      
## [3] &quot;Me too, thanks for asking.&quot;</code></pre>
<p>However, in everyday use you would probably go with <code>str_replace()</code> and regular expressions.</p>
</div>
<div id="concatenating-strings" class="section level3" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> Concatenating strings</h3>
<p>Similar to how <code>c()</code> puts together different elements (or vectors of length 1) into a single vector, <code>str_c()</code> can be used to concatenate several strings into a single string. This can, for instance, be used to write some birthday invitations.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="stringregex.html#cb297-1" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Inger&quot;</span>, <span class="st">&quot;Peter&quot;</span>, <span class="st">&quot;Kalle&quot;</span>, <span class="st">&quot;Ingrid&quot;</span>)</span>
<span id="cb297-2"><a href="stringregex.html#cb297-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-3"><a href="stringregex.html#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;Hi&quot;</span>, names, <span class="st">&quot;I hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;HiIngerI hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot; 
## [2] &quot;HiPeterI hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot; 
## [3] &quot;HiKalleI hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot; 
## [4] &quot;HiIngridI hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot;</code></pre>
<p>Well, this looks kind of ugly, as there are no spaces and commas are lacking as well. You can fix that by determining a separator using the <code>sep</code> argument.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="stringregex.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;Hi&quot;</span>, names, <span class="st">&quot;I hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hi, Inger, I hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot; 
## [2] &quot;Hi, Peter, I hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot; 
## [3] &quot;Hi, Kalle, I hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot; 
## [4] &quot;Hi, Ingrid, I hope you&#39;re doing well. As per this letter, I invite you to my birthday party.&quot;</code></pre>
<p>You could also collapse the strings contained in a vector together into one single string using the <code>collapse</code> argument.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="stringregex.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(names, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Inger, Peter, Kalle, Ingrid&quot;</code></pre>
<p>This can also be achieved using the <code>str_flatten()</code> function.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="stringregex.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(names, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Inger, Peter, Kalle, Ingrid&quot;</code></pre>
</div>
<div id="repetition" class="section level3" number="6.1.5">
<h3><span class="header-section-number">6.1.5</span> Repetition</h3>
<p>Repeating (or duplicating) strings is performed using <code>str_dup()</code>. The function takes two arguments: the string to be duplicated and the number of times.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="stringregex.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(<span class="st">&quot;felix&quot;</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;felixfelix&quot;</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="stringregex.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(<span class="st">&quot;felix&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;felix&quot;           &quot;felixfelix&quot;      &quot;felixfelixfelix&quot;</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="stringregex.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(names, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;IngerInger&quot;   &quot;PeterPeter&quot;   &quot;KalleKalle&quot;   &quot;IngridIngrid&quot;</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="stringregex.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(names, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Inger&quot;                    &quot;PeterPeter&quot;              
## [3] &quot;KalleKalleKalle&quot;          &quot;IngridIngridIngridIngrid&quot;</code></pre>
</div>
<div id="removing-unnecessary-whitespaces" class="section level3" number="6.1.6">
<h3><span class="header-section-number">6.1.6</span> Removing unnecessary whitespaces</h3>
<p>Often text contains unnecessary whitespaces.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="stringregex.html#cb313-1" aria-hidden="true" tabindex="-1"></a>unnecessary_whitespaces <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;    on the left&quot;</span>, <span class="st">&quot;on the right    &quot;</span>, <span class="st">&quot;    on both sides   &quot;</span>, <span class="st">&quot;   literally    everywhere  &quot;</span>)</span></code></pre></div>
<p>Removing the ones at the beginning or the end of a string can be accomplished using <code>str_trim()</code>.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="stringregex.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(unnecessary_whitespaces, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;on the left&quot;               &quot;on the right    &quot;         
## [3] &quot;on both sides   &quot;          &quot;literally    everywhere  &quot;</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="stringregex.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(unnecessary_whitespaces, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;    on the left&quot;            &quot;on the right&quot;              
## [3] &quot;    on both sides&quot;          &quot;   literally    everywhere&quot;</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="stringregex.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(unnecessary_whitespaces, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>) <span class="co"># the default option</span></span></code></pre></div>
<pre><code>## [1] &quot;on the left&quot;             &quot;on the right&quot;           
## [3] &quot;on both sides&quot;           &quot;literally    everywhere&quot;</code></pre>
<p><code>str_trim()</code> could not fix the last string though, where unnecessary whitespaces were also present in between words. Here, <code>str_squish</code> is more appropriate. It removes leading or trailing whitespaces as well as duplicated ones in between words.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="stringregex.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(unnecessary_whitespaces)</span></code></pre></div>
<pre><code>## [1] &quot;on the left&quot;          &quot;on the right&quot;         &quot;on both sides&quot;       
## [4] &quot;literally everywhere&quot;</code></pre>
</div>
</div>
<div id="regular-expressions" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Regular expressions</h2>
<p>Up to now, you have been introduced to the more basic functions of the <code>stringr</code> package. Those are useful, for sure, yet limited. However, to make use of the full potential of <code>stringr</code>, you will first have to get acquainted to regular expressions (also often abbreviated as “regex” with plural “regexes”).</p>
<p>Those regular expressions are patterns that can be used to describe certain strings. Hence, if you want to replace certain words with another one, you can write the proper regex and it will identify the strings you want to replace and the <code>stringr</code> function (i.e., <code>str_replace()</code>) will take care of the rest. Exemplary use cases of regexes are the identification of phone numbers, email addresses, or whether a password you choose on a web page consists of enough characters, an upper-case character, and at least one special character.</p>
<p>Before you dive into regexes, beware that they are quite complicated in the beginning (honestly, I was quite overwhelmed when I encountered them first). Yet, mastering them is very rewarding and will definitely pay off in the future.</p>
<div id="literal-characters" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Literal characters</h3>
<p>The most basic regex patterns consist of literal characters only. <code>str_view()</code> tells you which parts of a string match a pattern is present in the element.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="stringregex.html#cb322-1" aria-hidden="true" tabindex="-1"></a>five_largest_cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Stockholm&quot;</span>, <span class="st">&quot;Göteborg&quot;</span>, <span class="st">&quot;Malmö&quot;</span>, <span class="st">&quot;Uppsala&quot;</span>, <span class="st">&quot;Västerås&quot;</span>)</span>
<span id="cb322-2"><a href="stringregex.html#cb322-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-3"><a href="stringregex.html#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(five_largest_cities, <span class="st">&quot;stockholm&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-f30d7598595affc4f25a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-f30d7598595affc4f25a">{"x":{"html":"<ul>\n  <li>Stockholm<\/li>\n  <li>Göteborg<\/li>\n  <li>Malmö<\/li>\n  <li>Uppsala<\/li>\n  <li>Västerås<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Note that regexes are case-sensitive.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="stringregex.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(five_largest_cities, <span class="st">&quot;Stockholm&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-b85bf888dc62471906a9" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-b85bf888dc62471906a9">{"x":{"html":"<ul>\n  <li><span class='match'>Stockholm<\/span><\/li>\n  <li>Göteborg<\/li>\n  <li>Malmö<\/li>\n  <li>Uppsala<\/li>\n  <li>Västerås<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>They also match parts of words:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="stringregex.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(five_largest_cities, <span class="st">&quot;borg&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-88fdd2a34d502a66744b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-88fdd2a34d502a66744b">{"x":{"html":"<ul>\n  <li>Stockholm<\/li>\n  <li>Göte<span class='match'>borg<\/span><\/li>\n  <li>Malmö<\/li>\n  <li>Uppsala<\/li>\n  <li>Västerås<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Moreover, they are “greedy,” they only match the first occurrence (in “Stockholm”):</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="stringregex.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(five_largest_cities, <span class="st">&quot;o&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-8e1fe96c0688a849169a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-8e1fe96c0688a849169a">{"x":{"html":"<ul>\n  <li>St<span class='match'>o<\/span>ckholm<\/li>\n  <li>Göteb<span class='match'>o<\/span>rg<\/li>\n  <li>Malmö<\/li>\n  <li>Uppsala<\/li>\n  <li>Västerås<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>This can be addressed in the <code>stringr</code> package by using <code>str_._all()</code> function – but more on that later.</p>
<p>If you want to match multiple literal characters (or words, for that sake), you can connect them using the <code>|</code> metacharacter (more on metacharacters later).</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="stringregex.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(five_largest_cities, <span class="st">&quot;Stockholm|Göteborg&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-bb3486349adfa5d821dc" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-bb3486349adfa5d821dc">{"x":{"html":"<ul>\n  <li><span class='match'>Stockholm<\/span><\/li>\n  <li><span class='match'>Göteborg<\/span><\/li>\n  <li>Malmö<\/li>\n  <li>Uppsala<\/li>\n  <li>Västerås<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>question: automate the pattern-generating process using str_c – hint: collapse = “|”</p>
<p>Every letter of the English alphabet (or number/or combination of those) can serve as a literal character. Those literal characters <em>match themselves</em>. This is, however, not the case with the other sort of characters, so-called metacharacters.</p>
</div>
<div id="metacharacters" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Metacharacters</h3>
<p>When using regexes, the following characters are considered metacharacters and have a special meaning:</p>
<p><code>. \ | ( ) { } [ ] ^ $ - * + ?</code></p>
<div id="the-wildcard" class="section level4" number="6.2.2.1">
<h4><span class="header-section-number">6.2.2.1</span> The wildcard</h4>
<p>Did you notice how I used the dot to refer to the entirety of the <code>str_._all()</code> functions? This is basically what the <code>.</code> meta-character does: it matches every character except for a new line. The first call extracts all function names from the <code>stringr</code> package, the second one shows the matches (i.e., the elements of the vector where it can find the pattern).</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="stringregex.html#cb327-1" aria-hidden="true" tabindex="-1"></a>stringr_functions <span class="ot">&lt;-</span> <span class="fu">ls</span>(<span class="st">&quot;package:stringr&quot;</span>)</span>
<span id="cb327-2"><a href="stringregex.html#cb327-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-3"><a href="stringregex.html#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(stringr_functions, <span class="st">&quot;str_._all&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [49] FALSE FALSE FALSE FALSE</code></pre>
<p>Well, as you can see, there are none. This is due to the fact that the <code>.</code> can only replace one character. We need some sort of multiplier to find them. The ones available are:</p>
<ul>
<li><code>?</code> – zero or one</li>
<li><code>*</code> – zero or more</li>
<li><code>+</code> – one or more</li>
<li><code>{n}</code> – exactly n</li>
<li><code>{n,}</code> – n or more</li>
<li><code>{n,m}</code> – between n and m</li>
</ul>
<p>In our case, the appropriate one is <code>+</code>:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="stringregex.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(stringr_functions, <span class="st">&quot;str_.+_all&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [25]  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [49] FALSE FALSE FALSE FALSE</code></pre>
<p>However, if you want to match the character dot? This probkem might arise when searching for clock time. A naive regex might look like this:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="stringregex.html#cb331-1" aria-hidden="true" tabindex="-1"></a>vectors_with_time <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;13500&quot;</span>, <span class="st">&quot;13M00&quot;</span>, <span class="st">&quot;13.00&quot;</span>)</span>
<span id="cb331-2"><a href="stringregex.html#cb331-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-3"><a href="stringregex.html#cb331-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(vectors_with_time, <span class="st">&quot;13.00&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<p>Yet, it matches everything. We need some sort of literal dot. Here, the escape character <code>\</code> comes in handy. By putting it in front of the metacharacter, it does no longer has its special meaning, and is interpreted as a literal character. This procedure is referred to as “escaping.” Note that you will need to escape <code>\</code> as well.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="stringregex.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(vectors_with_time, <span class="st">&quot;13</span><span class="sc">\\</span><span class="st">.00&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
</div>
<div id="sets-of-characters" class="section level4" number="6.2.2.2">
<h4><span class="header-section-number">6.2.2.2</span> Sets of characters</h4>
<p>You can also define sets of multiple characters using the <code>[ ]</code> metacharacters. This can be used to define multiple possible characters that can appear in the same place.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="stringregex.html#cb335-1" aria-hidden="true" tabindex="-1"></a>sp_ce <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;spice&quot;</span>, <span class="st">&quot;space&quot;</span>)</span>
<span id="cb335-2"><a href="stringregex.html#cb335-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb335-3"><a href="stringregex.html#cb335-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(sp_ce, <span class="st">&quot;sp[ai]ce&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-44474b3e8cd160f85a98" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-44474b3e8cd160f85a98">{"x":{"html":"<ul>\n  <li><span class='match'>spice<\/span><\/li>\n  <li><span class='match'>space<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>You can also define certain ranges of characters using the <code>-</code> metacharacter:</p>
<p>Same holds for numbers:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="stringregex.html#cb336-1" aria-hidden="true" tabindex="-1"></a>american_phone_number <span class="ot">&lt;-</span> <span class="st">&quot;(555) 555-1234&quot;</span></span>
<span id="cb336-2"><a href="stringregex.html#cb336-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb336-3"><a href="stringregex.html#cb336-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(american_phone_number, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">([0-9]{3}</span><span class="sc">\\</span><span class="st">) [0-9]{3}-[0-9]{4}&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-2514ce28ae593bde0f73" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-2514ce28ae593bde0f73">{"x":{"html":"<ul>\n  <li><span class='match'>(555) 555-1234<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>exercise: write a regex for the phone numbers in your area</p>
<p>There are also predefined sets of characters, for instance digits or letters, which are called <em>character classes</em>. You can find them on the <a href="https://github.com/rstudio/cheatsheets/blob/master/strings.pdf"><code>stringr</code> cheatsheet</a>.
exercise: write the regex expression for the character classes alnum, alpha, digit, lower, upper, and space.</p>
<p>Furthermore, you can put almost every metacharacter inside the square brackets without escaping them. This does not apply to the the caret (<code>^</code>) in first position, the dash <code>-</code>, the closing square bracket <code>]</code>, and the backslash <code>\</code>.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="stringregex.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(vector_of_strings, <span class="st">&quot;[.]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-5d05eac75555269eefd0" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-5d05eac75555269eefd0">{"x":{"html":"<ul>\n  <li>Hi, how are you doing<span class='match'>.<\/span><\/li>\n  <li>I'm doing well, HBY<span class='match'>.<\/span><\/li>\n  <li>Me too, thanks for asking<span class='match'>.<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="negating-sets-of-characters" class="section level4" number="6.2.2.3">
<h4><span class="header-section-number">6.2.2.3</span> Negating sets of characters</h4>
<p>Sometimes you will also want to exclude certain sets of characters or words. In order to achieve this, you can use the <code>^</code> metacharacter at the beginning of the range or set you are defining.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="stringregex.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(sp_ce, <span class="st">&quot;sp[^i]ce&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-7531f021030c44f57ef2" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-7531f021030c44f57ef2">{"x":{"html":"<ul>\n  <li>spice<\/li>\n  <li><span class='match'>space<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="anchors" class="section level4" number="6.2.2.4">
<h4><span class="header-section-number">6.2.2.4</span> Anchors</h4>
<p>There is also a way to define whether you want the pattern to be present in the beginning <code>^</code> or at the end <code>$</code> of a string. <code>sentences</code> are a couple of (i.e., 720) predefined example sentences. If I were now interested in the number of sentences that begin with a “the,” I could write the following regex:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="stringregex.html#cb339-1" aria-hidden="true" tabindex="-1"></a>shortened_sentences <span class="ot">&lt;-</span> sentences[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb339-2"><a href="stringregex.html#cb339-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-3"><a href="stringregex.html#cb339-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(shortened_sentences, <span class="st">&quot;^The&quot;</span>) </span></code></pre></div>
<div id="htmlwidget-983315589fed18d622a7" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-983315589fed18d622a7">{"x":{"html":"<ul>\n  <li><span class='match'>The<\/span> birch canoe slid on the smooth planks.<\/li>\n  <li>Glue the sheet to the dark blue background.<\/li>\n  <li>It's easy to tell the depth of a well.<\/li>\n  <li><span class='match'>The<\/span>se days a chicken leg is a rare dish.<\/li>\n  <li>Rice is often served in round bowls.<\/li>\n  <li><span class='match'>The<\/span> juice of lemons makes fine punch.<\/li>\n  <li><span class='match'>The<\/span> box was thrown beside the parked truck.<\/li>\n  <li><span class='match'>The<\/span> hogs were fed chopped corn and garbage.<\/li>\n  <li>Four hours of steady work faced us.<\/li>\n  <li>Large size in stockings is hard to sell.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>If I wanted to know how many start with a “The” and end with a full stop, I could do this one:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="stringregex.html#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(shortened_sentences, <span class="st">&quot;^The.+</span><span class="sc">\\</span><span class="st">.$&quot;</span>) </span></code></pre></div>
<div id="htmlwidget-6f1d8b9e786d9d3fe28d" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-6f1d8b9e786d9d3fe28d">{"x":{"html":"<ul>\n  <li><span class='match'>The birch canoe slid on the smooth planks.<\/span><\/li>\n  <li>Glue the sheet to the dark blue background.<\/li>\n  <li>It's easy to tell the depth of a well.<\/li>\n  <li><span class='match'>These days a chicken leg is a rare dish.<\/span><\/li>\n  <li>Rice is often served in round bowls.<\/li>\n  <li><span class='match'>The juice of lemons makes fine punch.<\/span><\/li>\n  <li><span class='match'>The box was thrown beside the parked truck.<\/span><\/li>\n  <li><span class='match'>The hogs were fed chopped corn and garbage.<\/span><\/li>\n  <li>Four hours of steady work faced us.<\/li>\n  <li>Large size in stockings is hard to sell.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="boundaries" class="section level4" number="6.2.2.5">
<h4><span class="header-section-number">6.2.2.5</span> Boundaries</h4>
<p>Note that right now, the regex also matches the sentence which starts with a “These.” In order to address this, I need to tell the machine that it should only accept a “The” if there starts a new word thereafter. In regex syntax, this is done using so-called boundaries. Those are defined as <code>\b</code> as a word boundary and <code>\B</code> as no word boundary. (Note that you will need an additional escape character as you will have to escape the escape character itself.)</p>
<p>In my example, I would include the former if I were to search for sentences that begin with a single “The” and the latter if I were to search for sentences that begin with a word that starts with a “The” but are not “The” – such as “These.”</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="stringregex.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(shortened_sentences, <span class="st">&quot;^The</span><span class="sc">\\</span><span class="st">b.+</span><span class="sc">\\</span><span class="st">.$&quot;</span>) </span></code></pre></div>
<div id="htmlwidget-dcdfc64296f5794e54a4" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-dcdfc64296f5794e54a4">{"x":{"html":"<ul>\n  <li><span class='match'>The birch canoe slid on the smooth planks.<\/span><\/li>\n  <li>Glue the sheet to the dark blue background.<\/li>\n  <li>It's easy to tell the depth of a well.<\/li>\n  <li>These days a chicken leg is a rare dish.<\/li>\n  <li>Rice is often served in round bowls.<\/li>\n  <li><span class='match'>The juice of lemons makes fine punch.<\/span><\/li>\n  <li><span class='match'>The box was thrown beside the parked truck.<\/span><\/li>\n  <li><span class='match'>The hogs were fed chopped corn and garbage.<\/span><\/li>\n  <li>Four hours of steady work faced us.<\/li>\n  <li>Large size in stockings is hard to sell.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="stringregex.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(shortened_sentences, <span class="st">&quot;^The</span><span class="sc">\\</span><span class="st">B.+</span><span class="sc">\\</span><span class="st">.$&quot;</span>) </span></code></pre></div>
<div id="htmlwidget-873249b169eb6149d57e" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-873249b169eb6149d57e">{"x":{"html":"<ul>\n  <li>The birch canoe slid on the smooth planks.<\/li>\n  <li>Glue the sheet to the dark blue background.<\/li>\n  <li>It's easy to tell the depth of a well.<\/li>\n  <li><span class='match'>These days a chicken leg is a rare dish.<\/span><\/li>\n  <li>Rice is often served in round bowls.<\/li>\n  <li>The juice of lemons makes fine punch.<\/li>\n  <li>The box was thrown beside the parked truck.<\/li>\n  <li>The hogs were fed chopped corn and garbage.<\/li>\n  <li>Four hours of steady work faced us.<\/li>\n  <li>Large size in stockings is hard to sell.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="lookarounds" class="section level4" number="6.2.2.6">
<h4><span class="header-section-number">6.2.2.6</span> Lookarounds</h4>
<p>A final common task is to extract certain words or values based on what comes before or after them. Look at the following example:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="stringregex.html#cb343-1" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1m30cm&quot;</span>, <span class="st">&quot;2m01cm&quot;</span>, <span class="st">&quot;3m10cm&quot;</span>)</span></code></pre></div>
<p>exercise: bring that into numeric format (hint: str_c %&gt;% as.numeric)</p>
<p>Here, in order to identify the height in meters, the first task is to identify all the numbers that are followed by an “m.” The regex syntax for this looks like this: <code>A(?=pattern)</code> with <code>A</code> being the entity that is supposed to be found (hence, in this case, [0-9]+).</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="stringregex.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(heights, <span class="st">&quot;[0-9]+(?=m)&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-cbd3ad10bd2d35a2e76d" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-cbd3ad10bd2d35a2e76d">{"x":{"html":"<ul>\n  <li><span class='match'>1<\/span>m30cm<\/li>\n  <li><span class='match'>2<\/span>m01cm<\/li>\n  <li><span class='match'>3<\/span>m10cm<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>The second step now is to identify the centimeters. This could of corse be achieved using the same regex and replacing <code>m</code> by <code>cm</code>. However, we can also harness a so-called negative look ahead <code>A(?!pattern)</code>, a so-called look behind <code>(?&lt;=pattern)A</code>. The negative counterpart, the negative look behind <code>(?&lt;!pattern)A</code> could be used to extract the meters.</p>
<p>The negative look ahead basically returns everything that is not followed by the defined pattern. The look behind returns everything that is preceded by the pattern, the negative loook behind returns everything that is not preceded by the pattern.</p>
<p>In the following, I demonstrate how you could extract the centimeters using negative look ahead and look behind.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="stringregex.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(heights, <span class="st">&quot;[0-9]+(?!m)&quot;</span>) <span class="co"># negative look ahead</span></span></code></pre></div>
<div id="htmlwidget-f25d4e1770d66a86dcce" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-f25d4e1770d66a86dcce">{"x":{"html":"<ul>\n  <li>1m<span class='match'>30<\/span>cm<\/li>\n  <li>2m<span class='match'>01<\/span>cm<\/li>\n  <li>3m<span class='match'>10<\/span>cm<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="stringregex.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(heights, <span class="st">&quot;(?&lt;=m)[0-9]+&quot;</span>) <span class="co"># look behind</span></span></code></pre></div>
<div id="htmlwidget-969965edfe9f869aa904" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-969965edfe9f869aa904">{"x":{"html":"<ul>\n  <li>1m<span class='match'>30<\/span>cm<\/li>\n  <li>2m<span class='match'>01<\/span>cm<\/li>\n  <li>3m<span class='match'>10<\/span>cm<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>exercise: how can you extract the meters using the negative look behind?</p>
</div>
</div>
</div>
<div id="more-advanced-string-manipulation" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> More advanced string manipulation</h2>
<p>Yow that you have learned about regexes, you can unleash the full power of <code>stringr</code>.</p>
<p>The basic syntax of a <code>stringr</code> function looks as follows: <code>str_*(string, regex(""))</code>. Some <code>stringr</code> functions also have the suffix <code>_all</code> which implies that they perform the operation not only on the first match (“greedy”) but on every match.</p>
<p>In order to demonstrate the different functionalities, I will again rely on the subset of example sentences.</p>
<div id="detect-matches" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Detect matches</h3>
<p><code>str_detect</code> can be used whether a certain pattern is present in the string.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="stringregex.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(shortened_sentences, <span class="st">&quot;The</span><span class="sc">\\</span><span class="st">b&quot;</span>)</span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE</code></pre>
<p>This also works very well in a <code>dplyr::filter()</code> call. Finding all action movies in the IMDB data set can be solved like this:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="stringregex.html#cb349-1" aria-hidden="true" tabindex="-1"></a>imdb_raw <span class="sc">%&gt;%</span> </span>
<span id="cb349-2"><a href="stringregex.html#cb349-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Genre, <span class="st">&quot;Action&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 303 × 12
##     Rank Title  Genre  Description Director Actors  Year `Runtime (Minut… Rating
##    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;            &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 Guard… Actio… A group of… James G… Chris…  2014              121    8.1
##  2     5 Suici… Actio… A secret g… David A… Will …  2016              123    6.2
##  3     6 The G… Actio… European m… Yimou Z… Matt …  2016              103    6.1
##  4     9 The L… Actio… A true-lif… James G… Charl…  2016              141    7.1
##  5    13 Rogue… Actio… The Rebel … Gareth … Felic…  2016              133    7.9
##  6    15 Colos… Actio… Gloria is … Nacho V… Anne …  2016              109    6.4
##  7    18 Jason… Actio… The CIA&#39;s … Paul Gr… Matt …  2016              123    6.7
##  8    25 Indep… Actio… Two decade… Roland … Liam …  2016              120    5.3
##  9    27 Bahub… Actio… In ancient… S.S. Ra… Prabh…  2015              159    8.3
## 10    30 Assas… Actio… When Callu… Justin … Micha…  2016              115    5.9
## # … with 293 more rows, and 3 more variables: Votes &lt;dbl&gt;,
## #   Revenue (Millions) &lt;dbl&gt;, Metascore &lt;dbl&gt;</code></pre>
<p>Exercise: find sci-fi movies</p>
<p>If you want to know whether there are multiple matches present in each string, you can use <code>str_count</code>. Here, it might by advisable to set the <code>ignore_case</code> option to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="stringregex.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(shortened_sentences, <span class="fu">regex</span>(<span class="st">&quot;The</span><span class="sc">\\</span><span class="st">b&quot;</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##  [1] 2 2 1 0 0 1 2 1 0 0</code></pre>
<p>If you want to locate the match in the string, use <code>str_locate</code>. This returns a matrix, which is basically a vector of multiple dimensions.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="stringregex.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate</span>(shortened_sentences, <span class="fu">regex</span>(<span class="st">&quot;The</span><span class="sc">\\</span><span class="st">b&quot;</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##       start end
##  [1,]     1   3
##  [2,]     6   8
##  [3,]    19  21
##  [4,]    NA  NA
##  [5,]    NA  NA
##  [6,]     1   3
##  [7,]     1   3
##  [8,]     1   3
##  [9,]    NA  NA
## [10,]    NA  NA</code></pre>
<p>Moreover, this is a good example for the greediness of <code>stringr</code> functions. Hence, it is advisable to use <code>str_locate_all</code> which returns a list with one matrix for each element of the original vector:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="stringregex.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate_all</span>(shortened_sentences, <span class="fu">regex</span>(<span class="st">&quot;The</span><span class="sc">\\</span><span class="st">b&quot;</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     1   3
## [2,]    25  27
## 
## [[2]]
##      start end
## [1,]     6   8
## [2,]    19  21
## 
## [[3]]
##      start end
## [1,]    19  21
## 
## [[4]]
##      start end
## 
## [[5]]
##      start end
## 
## [[6]]
##      start end
## [1,]     1   3
## 
## [[7]]
##      start end
## [1,]     1   3
## [2,]    27  29
## 
## [[8]]
##      start end
## [1,]     1   3
## 
## [[9]]
##      start end
## 
## [[10]]
##      start end</code></pre>
</div>
<div id="mutating-strings" class="section level3" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Mutating strings</h3>
<p>Mutating strings usually implies the replacement of certain elements (e.g., words) with other elements (or removing them, which is basically a special case of replacing them). In <code>stringr</code> this is performed using <code>str_replace(string, pattern, replacement)</code> and <code>str_replace_all(string, pattern, replacement)</code>.</p>
<p>If I wanted, for instance, replace all “m” letters by “meters,” I would go about this the following way:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="stringregex.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(heights, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;meters&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1meters30cm&quot; &quot;2meters01cm&quot; &quot;3meters10cm&quot;</code></pre>
<p>Note that <code>str_replace_all</code> woukd have lead to the following outcome:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="stringregex.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(heights, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;meters&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1meters30cmeters&quot; &quot;2meters01cmeters&quot; &quot;3meters10cmeters&quot;</code></pre>
<p>However, I also want to replace the “cm” with “centimeters,” hence, I can harness another feature of <code>str_replace_all()</code>:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="stringregex.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(heights, <span class="fu">c</span>(<span class="st">&quot;m&quot;</span> <span class="ot">=</span> <span class="st">&quot;meters&quot;</span>, <span class="st">&quot;cm&quot;</span> <span class="ot">=</span> <span class="st">&quot;centimeters&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;1meters30centimeterseters&quot; &quot;2meters01centimeterseters&quot;
## [3] &quot;3meters10centimeterseters&quot;</code></pre>
<p>What becomes obvious is that a “simple” regex containing just literal characters more often than not does not suffice. It will be your task to fix this. And while on it, you can also address the meter/meters problem – a “1” needs meter instead of meters. Another feature is that the replacements are performed in order. You can harness this for solving the problem.</p>
<details>
<summary>
Solution. Click to expand!
</summary>
<p>Solution:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="stringregex.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(heights, <span class="fu">c</span>(<span class="st">&quot;(?&lt;=[2-9]{1})m&quot;</span> <span class="ot">=</span> <span class="st">&quot;meters&quot;</span>, <span class="st">&quot;(?&lt;=[0-9]{2})m&quot;</span> <span class="ot">=</span> <span class="st">&quot;meters&quot;</span>, <span class="st">&quot;(?&lt;=1)m&quot;</span> <span class="ot">=</span> <span class="st">&quot;meter&quot;</span>, <span class="st">&quot;(?&lt;=01)cm$&quot;</span> <span class="ot">=</span> <span class="st">&quot;centimeter&quot;</span>, <span class="st">&quot;cm$&quot;</span> <span class="ot">=</span> <span class="st">&quot;centimeters&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;1meter30centimeters&quot;  &quot;2meters01centimeter&quot;  &quot;3meters10centimeters&quot;</code></pre>
</details>
</div>
<div id="extracting-text" class="section level3" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Extracting text</h3>
<p><code>str_extract(_all)()</code> can be used to extract matching strings. In the <code>mtcars</code> data set, the first word describes the car brand. Here, I harness another regexp, the <code>\\w</code> which stands for any word character. Its opponent is <code>\\W</code> for any non-word character.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="stringregex.html#cb365-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb365-2"><a href="stringregex.html#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;car_model&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb365-3"><a href="stringregex.html#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">manufacturer =</span> <span class="fu">str_extract</span>(car_model, <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b&quot;</span>))</span></code></pre></div>
<pre><code>##    manufacturer
## 1         Mazda
## 2         Mazda
## 3        Datsun
## 4        Hornet
## 5        Hornet
## 6       Valiant
## 7        Duster
## 8          Merc
## 9          Merc
## 10         Merc
## 11         Merc
## 12         Merc
## 13         Merc
## 14         Merc
## 15     Cadillac
## 16      Lincoln
## 17     Chrysler
## 18         Fiat
## 19        Honda
## 20       Toyota
## 21       Toyota
## 22        Dodge
## 23          AMC
## 24       Camaro
## 25      Pontiac
## 26         Fiat
## 27      Porsche
## 28        Lotus
## 29         Ford
## 30      Ferrari
## 31     Maserati
## 32        Volvo</code></pre>
</div>
<div id="split-vectors" class="section level3" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Split vectors</h3>
<p>Another use case here would have been to split it into two columns: manufacturer and model. One approach would be to use <code>str_split()</code>. This function splits the string at every occurrence of the predefined patter. In this example, I use a word boundary as the pattern:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="stringregex.html#cb367-1" aria-hidden="true" tabindex="-1"></a>manufacturer_model <span class="ot">&lt;-</span> <span class="fu">rownames</span>(mtcars)</span>
<span id="cb367-2"><a href="stringregex.html#cb367-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(manufacturer_model, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">b&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb367-3"><a href="stringregex.html#cb367-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;&quot;      &quot;Mazda&quot; &quot; &quot;     &quot;RX4&quot;   &quot;&quot;     
## 
## [[2]]
## [1] &quot;&quot;      &quot;Mazda&quot; &quot; &quot;     &quot;RX4&quot;   &quot; &quot;     &quot;Wag&quot;   &quot;&quot;     
## 
## [[3]]
## [1] &quot;&quot;       &quot;Datsun&quot; &quot; &quot;      &quot;710&quot;    &quot;&quot;      
## 
## [[4]]
## [1] &quot;&quot;       &quot;Hornet&quot; &quot; &quot;      &quot;4&quot;      &quot; &quot;      &quot;Drive&quot;  &quot;&quot;      
## 
## [[5]]
## [1] &quot;&quot;           &quot;Hornet&quot;     &quot; &quot;          &quot;Sportabout&quot; &quot;&quot;          
## 
## [[6]]
## [1] &quot;&quot;        &quot;Valiant&quot; &quot;&quot;</code></pre>
<p>This outputs a list containing the different singular words/special characters. This doesn’t make sense in this case. Here, however, the structure of the string is always roughly the same: “\[manufacturer\]\[ \]\[model description\].” Moreover, the manufacturer is only one word. Hence, the task can be fixed by splitting the string after the first word, which should indicate the manufacturer. This can be accomplished using <code>str_split_fixed()</code>. Fixed means that the number of splits is predefined. This returns a metrix that can easily become a tibble.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="stringregex.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split_fixed</span>(manufacturer_model, <span class="st">&quot;(?&lt;=</span><span class="sc">\\</span><span class="st">w)</span><span class="sc">\\</span><span class="st">b&quot;</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb369-2"><a href="stringregex.html#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb369-3"><a href="stringregex.html#cb369-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">manufacturer =</span> V1,</span>
<span id="cb369-4"><a href="stringregex.html#cb369-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">model =</span> V2)</span></code></pre></div>
<pre><code>## Warning: The `x` argument of `as_tibble.matrix()` must have unique column names if `.name_repair` is omitted as of tibble 2.0.0.
## Using compatibility `.name_repair`.</code></pre>
<pre><code>## # A tibble: 32 × 2
##    manufacturer model        
##    &lt;chr&gt;        &lt;chr&gt;        
##  1 Mazda        &quot; RX4&quot;       
##  2 Mazda        &quot; RX4 Wag&quot;   
##  3 Datsun       &quot; 710&quot;       
##  4 Hornet       &quot; 4 Drive&quot;   
##  5 Hornet       &quot; Sportabout&quot;
##  6 Valiant      &quot;&quot;           
##  7 Duster       &quot; 360&quot;       
##  8 Merc         &quot; 240D&quot;      
##  9 Merc         &quot; 230&quot;       
## 10 Merc         &quot; 280&quot;       
## # … with 22 more rows</code></pre>
</div>
</div>
<div id="further-links-5" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Further links</h2>
<ul>
<li>The <a href="https://github.com/rstudio/cheatsheets/blob/master/strings.pdf"><code>stringr</code> cheatsheet</a>.</li>
<li>A <a href="https://www.youtube.com/watch?v=NvHjYOilOf8">YouTube video</a> on Regexes by Johns Hopkins professor Roger Peng.</li>
<li>And a <a href="https://bookdown.org/rdpeng/rprogdatascience/regular-expressions.html#the-stringr-package">chapter</a> by Roger Peng.</li>
<li>A <a href="https://regexone.com">website for practicing regexes</a>.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="wrangling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="workwithfactors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction-to-r.pdf", "introduction-to-r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
